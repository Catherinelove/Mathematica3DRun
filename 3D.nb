(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 9.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       157,          7]
NotebookDataLength[    105180,       2444]
NotebookOptionsPosition[    103566,       2390]
NotebookOutlinePosition[    103956,       2407]
CellTagsIndexPosition[    103913,       2404]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[
 RowBox[{"Clear", "[", "\"\<Global`*\>\"", "]"}]], "Input",
 CellChangeTimes->{{3.6129406839375*^9, 3.612940693671875*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", "\:521b\:5efa\:65b9\:5757", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"createCube", "[", 
      RowBox[{"l_", ",", "w_", ",", "h_", ",", "center_", ",", 
       RowBox[{"color_:", "Cyan"}], ",", 
       RowBox[{"angle_:", "0"}], ",", 
       RowBox[{"based_:", "0"}]}], "]"}], ":=", 
     RowBox[{"Rotate", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"color", ",", 
         RowBox[{"Cuboid", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{
              RowBox[{
              "center", "\[LeftDoubleBracket]", "1", 
               "\[RightDoubleBracket]"}], "-", 
              FractionBox["l", "2"]}], ",", 
             RowBox[{
              RowBox[{
              "center", "\[LeftDoubleBracket]", "2", 
               "\[RightDoubleBracket]"}], "-", 
              FractionBox["w", "2"]}], ",", "based"}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{
              RowBox[{
              "center", "\[LeftDoubleBracket]", "1", 
               "\[RightDoubleBracket]"}], "+", 
              FractionBox["l", "2"]}], ",", 
             RowBox[{
              RowBox[{
              "center", "\[LeftDoubleBracket]", "2", 
               "\[RightDoubleBracket]"}], "+", 
              FractionBox["w", "2"]}], ",", 
             RowBox[{"h", "+", "based"}]}], "}"}]}], "]"}]}], "}"}], ",", 
       RowBox[{"angle", " ", "Degree"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", "0", ",", "1"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
         "center", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], 
         ",", 
         RowBox[{
         "center", "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}], 
         ",", "0"}], "}"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"(*", "\:7ed8\:5236\:7bad\:5934", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"arrow", "[", 
      RowBox[{"ori_", ",", "end_"}], "]"}], ":=", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"Arrowheads", "[", ".01", "]"}], ",", "Blue", ",", 
       RowBox[{"Arrow", "[", 
        RowBox[{"Tube", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"ori", ",", "end"}], "}"}], ",", "1", ",", 
          RowBox[{"VertexColors", "\[Rule]", 
           RowBox[{"{", 
            RowBox[{"Red", ",", "Blue"}], "}"}]}]}], "]"}], "]"}]}], "}"}]}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{"(*", "\:989c\:8272\:5217\:8868", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"colorList", "=", 
     RowBox[{"{", 
      RowBox[{
      "Red", ",", "Green", ",", "Blue", ",", "White", ",", "Gray", ",", 
       "Cyan", ",", "Magenta", ",", "Yellow", ",", "Brown", ",", "Orange", 
       ",", "Pink", ",", "Purple", ",", "LightRed", ",", "LightGreen", ",", 
       "LightBlue", ",", "LightGray", ",", "LightCyan", ",", "LightMagenta", 
       ",", "LightYellow", ",", "LightBrown", ",", "LightOrange", ",", 
       "LightPink", ",", "LightPurple"}], "}"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", "\:8bbe\:7f6e\:89c6\:89d2", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"viewvector", "[", 
      RowBox[{"ori_", ",", "dir_"}], "]"}], ":=", 
     RowBox[{"{", 
      RowBox[{"ori", ",", 
       RowBox[{"ori", "+", "dir"}]}], "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"normDir", "[", 
      RowBox[{"dir_", ",", 
       RowBox[{"rate_:", "10"}]}], "]"}], ":=", 
     RowBox[{"rate", " ", 
      FractionBox["dir", 
       RowBox[{"Norm", "[", "dir", "]"}]]}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"pause", "[", "i_", "]"}], ":=", 
     RowBox[{"AbsoluteTiming", "[", 
      RowBox[{"Pause", "[", 
       FractionBox["i", "1000"], "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"(*", "\:53c2\:6570", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"minH", " ", "=", " ", "3"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"maxH", " ", "=", " ", "30"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"minW", " ", "=", " ", "5"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"maxW", " ", "=", " ", "30"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"minL", " ", "=", " ", "3"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"maxL", " ", "=", " ", "30"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"minSpan", " ", "=", " ", "3"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"maxSpan", " ", "=", " ", "10"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"playerH", " ", "=", " ", "5"}], ";"}], "\n", 
   RowBox[{
    RowBox[{"buildingNum", " ", "=", " ", "20"}], ";"}], "\n", 
   RowBox[{
    RowBox[{"speed", " ", "=", " ", "0.3"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"(*", "\:6784\:9020\:5efa\:7b51", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"building", " ", "=", " ", 
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"RandomInteger", "[", 
          RowBox[{"{", 
           RowBox[{"minL", ",", "maxL"}], "}"}], "]"}], ",", 
         RowBox[{"RandomInteger", "[", 
          RowBox[{"{", 
           RowBox[{"minW", ",", "maxW"}], "}"}], "]"}], ",", 
         RowBox[{"RandomInteger", "[", 
          RowBox[{"{", 
           RowBox[{"minH", ",", "maxH"}], "}"}], "]"}], ",", 
         RowBox[{"RandomInteger", "[", 
          RowBox[{"{", 
           RowBox[{"minSpan", ",", "maxSpan"}], "}"}], "]"}]}], "}"}], ",", 
       RowBox[{"{", "20", "}"}]}], "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{"centerlist", " ", "=", " ", 
     RowBox[{"{", "0", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"For", "[", 
     RowBox[{
      RowBox[{"i", "=", "1"}], ",", 
      RowBox[{"i", "<", "buildingNum"}], ",", 
      RowBox[{"i", "+=", "1"}], ",", 
      RowBox[{"AppendTo", "[", 
       RowBox[{"centerlist", ",", 
        RowBox[{
         RowBox[{
          RowBox[{"centerlist", "\[LeftDoubleBracket]", 
           RowBox[{"-", "1"}], "\[RightDoubleBracket]"}], "+", 
          FractionBox[
           RowBox[{"building", "\[LeftDoubleBracket]", 
            RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}], "2"], "+", 
          FractionBox[
           RowBox[{"building", "\[LeftDoubleBracket]", 
            RowBox[{
             RowBox[{"i", "+", "1"}], ",", "1"}], "\[RightDoubleBracket]"}], 
           "2"], "+", 
          RowBox[{"building", "\[LeftDoubleBracket]", 
           RowBox[{"i", ",", "4"}], "\[RightDoubleBracket]"}]}], "//", 
         "N"}]}], "]"}]}], "]"}], ";"}], "\n", 
   RowBox[{
    RowBox[{"buildingColor", " ", "=", " ", 
     RowBox[{"RandomInteger", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"1", ",", 
         RowBox[{"Length", "@", "colorList"}]}], "}"}], ",", "buildingNum"}], 
      "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"buildingCube", " ", "=", " ", 
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{"createCube", "[", 
        RowBox[{
         RowBox[{"building", "\[LeftDoubleBracket]", 
          RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}], ",", 
         RowBox[{"building", "\[LeftDoubleBracket]", 
          RowBox[{"i", ",", "2"}], "\[RightDoubleBracket]"}], ",", 
         RowBox[{"building", "\[LeftDoubleBracket]", 
          RowBox[{"i", ",", "3"}], "\[RightDoubleBracket]"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
           "centerlist", "\[LeftDoubleBracket]", "i", 
            "\[RightDoubleBracket]"}], ",", "0"}], "}"}], ",", 
         RowBox[{"colorList", "\[LeftDoubleBracket]", 
          RowBox[{
          "buildingColor", "\[LeftDoubleBracket]", "i", 
           "\[RightDoubleBracket]"}], "\[RightDoubleBracket]"}]}], "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"i", ",", "buildingNum"}], "}"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", "\:629b\:7269\:7ebf\:65b9\:7a0b", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"pwx", " ", "=", " ", 
     RowBox[{"Solve", "[", 
      RowBox[{
       RowBox[{"And", "@@", 
        RowBox[{"Thread", "[", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"a", " ", 
              SuperscriptBox["#", "2"]}], "+", 
             RowBox[{"b", " ", "#"}], " ", "+", " ", "c"}], "&"}], "/@", 
           RowBox[{"{", 
            RowBox[{
             SubscriptBox["x", "1"], ",", 
             SubscriptBox["x", "2"], ",", 
             FractionBox[
              RowBox[{
               SubscriptBox["x", "1"], "+", 
               SubscriptBox["x", "2"]}], "2"]}], "}"}]}], "\[Equal]", 
          RowBox[{"{", 
           RowBox[{
            SubscriptBox["y", "1"], ",", 
            SubscriptBox["y", "2"], ",", 
            RowBox[{
             RowBox[{"Max", "[", 
              RowBox[{"{", 
               RowBox[{
                SubscriptBox["y", "1"], ",", 
                SubscriptBox["y", "2"]}], "}"}], "]"}], "+", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{
                RowBox[{
                 SubscriptBox["y", "1"], "-", 
                 SubscriptBox["y", "2"]}], "<", "3"}], ",", "1", ",", "3"}], 
              "]"}]}]}], "}"}]}], "]"}]}], ",", 
       RowBox[{"{", 
        RowBox[{"a", ",", "b", ",", "c"}], "}"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"pwxf", "[", 
      RowBox[{"ori_", ",", "end_"}], "]"}], " ", ":=", " ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"a", " ", 
          SuperscriptBox["x", "2"]}], "+", 
         RowBox[{"b", " ", "x"}], " ", "+", " ", "c"}], "/.", "pwx"}], "/.", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          SubscriptBox["x", "1"], "\[Rule]", 
          RowBox[{
          "ori", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]}], 
         ",", 
         RowBox[{
          SubscriptBox["y", "1"], "->", 
          RowBox[{
          "ori", "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]}], 
         ",", 
         RowBox[{
          SubscriptBox["x", "2"], "\[Rule]", 
          RowBox[{
          "end", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]}], 
         ",", 
         RowBox[{
          SubscriptBox["y", "2"], "\[Rule]", 
          RowBox[{
          "end", "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]}]}], 
        "}"}]}], "//", "First"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
   "(*", "\:5efa\:7b51\:7269\:8d77\:8df3\:8d77\:70b9\:548c\:7ec8\:70b9", 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"getBuildingBegin", "[", "i_", "]"}], ":=", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{
        RowBox[{
        "centerlist", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}], 
        "-", 
        FractionBox[
         RowBox[{"building", "\[LeftDoubleBracket]", 
          RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}], "2"]}], ",", 
       "0", ",", 
       RowBox[{
        RowBox[{"building", "\[LeftDoubleBracket]", 
         RowBox[{"i", ",", "3"}], "\[RightDoubleBracket]"}], "+", 
        "playerH"}]}], "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"getBuildingEnd", "[", "i_", "]"}], ":=", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{
        RowBox[{
        "centerlist", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}], 
        "+", 
        FractionBox[
         RowBox[{"building", "\[LeftDoubleBracket]", 
          RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}], "2"]}], ",", 
       "0", ",", 
       RowBox[{
        RowBox[{"building", "\[LeftDoubleBracket]", 
         RowBox[{"i", ",", "3"}], "\[RightDoubleBracket]"}], "+", 
        "playerH"}]}], "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "\:83b7\:53d6\:629b\:7269\:7ebf", "/", "\:76f4\:7ebf\:7684\:70b9"}], 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"getCurvePoint", "[", 
      RowBox[{"ori_", ",", "end_"}], "]"}], ":=", 
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"x", ",", "0", ",", 
         RowBox[{"pwxf", "[", 
          RowBox[{"ori", ",", "end"}], "]"}]}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"x", ",", 
         RowBox[{
         "ori", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], ",", 
         RowBox[{
         "end", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], ",", 
         "speed"}], "}"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"getLinePoint", "[", 
     RowBox[{"ori_", ",", "end_"}], "]"}], ":=", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"angle", " ", "=", " ", 
        RowBox[{"ArcTan", "[", 
         RowBox[{
          RowBox[{
           FractionBox[
            RowBox[{
            "#", "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}], 
            RowBox[{
            "#", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
           "&"}], "@", 
          RowBox[{"(", 
           RowBox[{"end", "-", "ori"}], ")"}]}], "]"}]}], "}"}], ",", 
      RowBox[{"Table", "[", 
       RowBox[{
        RowBox[{"ori", "+", 
         RowBox[{"{", 
          RowBox[{"x", ",", "0", ",", 
           RowBox[{"x", " ", 
            RowBox[{"Tan", "[", "angle", "]"}]}]}], "}"}]}], ",", 
        RowBox[{"{", 
         RowBox[{"x", ",", "0", ",", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{"end", "-", "ori"}], ")"}], "\[LeftDoubleBracket]", "1", 
           "\[RightDoubleBracket]"}], ",", 
          RowBox[{"speed", " ", 
           RowBox[{"Cos", "[", "angle", "]"}]}]}], "}"}]}], "]"}]}], 
     "]"}]}]}]}]], "Input",
 CellChangeTimes->CompressedData["
1:eJwtyk0ow3Ecx/Ffi0YIkzLCNrZFSQiFGiWtDdNsp8mBJFKUdpDUvzgQCrWN
g0geLosDjkIsecqWKHkoIZo8HNRMnvb7fv6HX6/e389P2dRpbpEwxnJDj8sE
786h31/BhDvR1H3RE5hzBrvPoeQKjtzA0XuSPT7BrRdxD8K8yCNSFU2y91jo
T8B9VoEeV6L7imBPMQw6j2m/dsGs3G9SUkAKm/VwyoJ7tQ2uiDo8P7Rv75Gs
4BRtvUQ7AvAy/JfUx5HCRiKsSYEdGdirdOg1UZMBNhqx27vQPsjShtEDorIx
2DsBjU64O4n/R9dw9QbOyP9o94ja00kWpkI/aNByLddwKzNIn/0VwwevtdzW
wFAD1+UdIy3FrjlupnVwnvvR5nNzm93l69y0V+1CREjFnH6Jy4S3JAX5JVqY
Cacha49QkdIYUigLopN/0P3SDHI8Cm7L4WQy1KlJZtNCZSnuasguKtGferTT
hI6vQ0tmYPYiXPbB/DNYYtKQZvIf9q513w==
  "]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Graphics3D", "[", 
  RowBox[{"buildingCube", ",", 
   RowBox[{"Axes", "\[Rule]", "True"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.612765439796875*^9, 3.612765493203125*^9}, {
   3.612765641*^9, 3.61276564903125*^9}, {3.612765777703125*^9, 
   3.612765780921875*^9}, {3.612767148625*^9, 3.612767163234375*^9}, 
   3.61285973609375*^9, {3.612861203*^9, 3.6128612168125*^9}, {
   3.612861473546875*^9, 3.61286150590625*^9}, {3.61286171465625*^9, 
   3.61286171846875*^9}, 3.612864728453125*^9, 3.612864771875*^9}],

Cell[BoxData[
 Graphics3DBox[{GeometricTransformation3DBox[
    {RGBColor[1, 0.5, 0.5], 
     CuboidBox[NCache[{-3, Rational[-13, 2], 0}, {-3, -6.5, 0}], 
      NCache[{3, Rational[13, 2], 27}, {3, 6.5, 27}]]}, {{{1, 0, 0}, {0, 1, 
     0}, {0, 0, 1}}, {0, 0, 0}}], GeometricTransformation3DBox[
    {RGBColor[1, 0.9, 0.8], 
     CuboidBox[NCache[{11., Rational[-25, 2], 0}, {11., -12.5, 0}], 
      NCache[{33., Rational[25, 2], 13}, {33., 12.5, 13}]]}, {{{1., 0., 0.}, {
     0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[1, 0.925, 0.925], CuboidBox[{38., -15, 0}, {59., 15, 12}]}, {{{
     1., 0., 0.}, {0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[0.6, 0.4, 0.2], CuboidBox[{62., -11, 0}, {75., 11, 12}]}, {{{1.,
      0., 0.}, {0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[1, 0.5, 0.5], 
     CuboidBox[NCache[{84., Rational[-13, 2], 0}, {84., -6.5, 0}], 
      NCache[{90., Rational[13, 2], 26}, {90., 6.5, 26}]]}, {{{1., 0., 0.}, {
     0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[1, 1, 0], 
     CuboidBox[NCache[{93., Rational[-25, 2], 0}, {93., -12.5, 0}], 
      NCache[{114., Rational[25, 2], 5}, {114., 12.5, 5}]]}, {{{1., 0., 0.}, {
     0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[0.6, 0.4, 0.2], 
     CuboidBox[NCache[{123., Rational[-9, 2], 0}, {123., -4.5, 0}], 
      NCache[{131., Rational[9, 2], 3}, {131., 4.5, 3}]]}, {{{1., 0., 0.}, {
     0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[1, 0, 1], 
     CuboidBox[NCache[{140., Rational[-27, 2], 0}, {140., -13.5, 0}], 
      NCache[{164., Rational[27, 2], 8}, {164., 13.5, 8}]]}, {{{1., 0., 0.}, {
     0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[0.88, 1, 0.88], CuboidBox[{170., -4, 0}, {179., 4, 3}]}, {{{1., 
     0., 0.}, {0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {GrayLevel[0.85], 
     CuboidBox[NCache[{186., Rational[-23, 2], 0}, {186., -11.5, 0}], 
      NCache[{196., Rational[23, 2], 26}, {196., 11.5, 26}]]}, {{{1., 0., 
     0.}, {0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[0.9, 1, 1], CuboidBox[{200., -7, 0}, {229., 7, 22}]}, {{{1., 0.,
      0.}, {0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[1, 0.9, 0.8], CuboidBox[{236., -6, 0}, {256., 6, 26}]}, {{{1., 
     0., 0.}, {0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[0, 1, 0], CuboidBox[{262., -13, 0}, {275., 13, 27}]}, {{{1., 0.,
      0.}, {0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[1, 1, 0], 
     CuboidBox[NCache[{285., Rational[-7, 2], 0}, {285., -3.5, 0}], 
      NCache[{289., Rational[7, 2], 26}, {289., 3.5, 26}]]}, {{{1., 0., 0.}, {
     0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[1, 0.5, 0], 
     CuboidBox[NCache[{295., Rational[-11, 2], 0}, {295., -5.5, 0}], 
      NCache[{300., Rational[11, 2], 13}, {300., 5.5, 13}]]}, {{{1., 0., 
     0.}, {0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[0.6, 0.4, 0.2], 
     CuboidBox[NCache[{310., Rational[-27, 2], 0}, {310., -13.5, 0}], 
      NCache[{321., Rational[27, 2], 3}, {321., 13.5, 3}]]}, {{{1., 0., 0.}, {
     0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[0, 1, 1], CuboidBox[{329., -4, 0}, {340., 4, 20}]}, {{{1., 0., 
     0.}, {0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[1, 1, 0], CuboidBox[{348., -14, 0}, {363., 14, 21}]}, {{{1., 0.,
      0.}, {0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[1, 0.5, 0.5], 
     CuboidBox[NCache[{371., Rational[-13, 2], 0}, {371., -6.5, 0}], 
      NCache[{377., Rational[13, 2], 24}, {377., 6.5, 24}]]}, {{{1., 0., 
     0.}, {0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[1, 0.5, 0.5], CuboidBox[{384., -3, 0}, {391., 3, 26}]}, {{{1., 
     0., 0.}, {0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}]},
  Axes->True,
  ImageSize->{967.0617491493776, 157.49999374151255`},
  ViewPoint->{0.8951527359558576, 2.8287376467767995`, 1.6269434240373581`},
  ViewVertical->{-0.1900183436446252, -12.861885897678299`, 
   7.133026062851626}]], "Output",
 CellChangeTimes->{
  3.612861474671875*^9, 3.612861507703125*^9, {3.6128617193125*^9, 
   3.61286172646875*^9}, {3.612864798296875*^9, 3.612864803015625*^9}, 
   3.612865027046875*^9, 3.612865631640625*^9, 3.612865686328125*^9, 
   3.612883594372306*^9, 3.6128836382838173`*^9, 3.6128840452980976`*^9, 
   3.6128893182466927`*^9, 3.6128894171073475`*^9, {3.612939725765625*^9, 
   3.61293973621875*^9}, {3.612940458328125*^9, 3.612940460078125*^9}, 
   3.6129405086875*^9, 3.612940605984375*^9, 3.612940701046875*^9, {
   3.612940800640625*^9, 3.6129408230625*^9}, 3.6129408773125*^9, {
   3.61294093125*^9, 3.612940936*^9}, {3.61294151740625*^9, 
   3.61294152246875*^9}, {3.612941970046875*^9, 3.612941995625*^9}, 
   3.612947069703125*^9, {3.61294726325*^9, 
   3.612947269203125*^9}},ImageCache->GraphicsData["CompressedBitmap", "\<\
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\
\>"]]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"pos", " ", "=", " ", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"For", "[", 
   RowBox[{
    RowBox[{"i", "=", "1"}], ",", 
    RowBox[{"i", "\[LessEqual]", 
     RowBox[{"buildingNum", "-", "1"}]}], ",", 
    RowBox[{"i", "+=", "1"}], ",", 
    RowBox[{"AppendTo", "[", 
     RowBox[{"pos", ",", 
      RowBox[{"getCurvePoint", "[", 
       RowBox[{
        RowBox[{"getBuildingEnd", "[", "i", "]"}], ",", 
        RowBox[{"getBuildingBegin", "[", 
         RowBox[{"i", "+", "1"}], "]"}]}], "]"}]}], "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"posplane", "=", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"For", "[", 
   RowBox[{
    RowBox[{"i", "=", "1"}], ",", 
    RowBox[{"i", "\[LessEqual]", "buildingNum"}], ",", 
    RowBox[{"i", "+=", "1"}], ",", 
    RowBox[{"AppendTo", "[", 
     RowBox[{"posplane", ",", 
      RowBox[{"getLinePoint", "[", 
       RowBox[{
        RowBox[{"getBuildingBegin", "[", "i", "]"}], ",", 
        RowBox[{"getBuildingEnd", "[", "i", "]"}]}], "]"}]}], "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"poslist", " ", "=", " ", 
   RowBox[{"Flatten", "[", 
    RowBox[{
     RowBox[{"Riffle", "[", 
      RowBox[{"posplane", ",", "pos"}], "]"}], ",", "1"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Graphics3D", "[", 
  RowBox[{
   RowBox[{"Flatten", "@", 
    RowBox[{"{", 
     RowBox[{"buildingCube", ",", 
      RowBox[{
       RowBox[{
        RowBox[{"Sphere", "[", 
         RowBox[{"#", ",", "1"}], "]"}], "&"}], "/@", "poslist"}]}], "}"}]}], 
   ",", 
   RowBox[{"Boxed", "\[Rule]", "False"}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.61286358665625*^9, 3.612863623203125*^9}, {
   3.6128639885*^9, 3.612864019609375*^9}, {3.612865218234375*^9, 
   3.61286525228125*^9}, {3.61286538175*^9, 3.612865383953125*^9}, {
   3.612865424671875*^9, 3.61286542665625*^9}, 3.612865574359375*^9, {
   3.61286574025*^9, 3.612865786578125*^9}, {3.61286620559375*^9, 
   3.61286623321875*^9}, {3.612866265875*^9, 3.61286627515625*^9}, {
   3.612866376515625*^9, 3.612866397921875*^9}, {3.612866827078125*^9, 
   3.61286682778125*^9}, {3.612884449246202*^9, 3.6128844667362022`*^9}}],

Cell[BoxData[
 Graphics3DBox[{GeometricTransformation3DBox[
    {RGBColor[0.88, 1, 0.88], 
     CuboidBox[NCache[{Rational[-13, 2], -13, 0}, {-6.5, -13, 0}], 
      NCache[{Rational[13, 2], 13, 9}, {6.5, 13, 9}]]}, {{{1, 0, 0}, {0, 1, 
     0}, {0, 0, 1}}, {0, 0, 0}}], GeometricTransformation3DBox[
    {RGBColor[1, 0.5, 0], CuboidBox[{9.5, -8, 0}, {25.5, 8, 3}]}, {{{1., 0., 
     0.}, {0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[0.6, 0.4, 0.2], CuboidBox[{29.5, -8, 0}, {34.5, 8, 22}]}, {{{1.,
      0., 0.}, {0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[1, 0.925, 0.925], 
     CuboidBox[{42.5, -14, 0}, {55.5, 14, 21}]}, {{{1., 0., 0.}, {0., 1., 
     0.}, {0., 0., 1.}}, {0., 0., 0.}}], GeometricTransformation3DBox[
    {RGBColor[0.88, 1, 0.88], 
     CuboidBox[NCache[{64.5, Rational[-27, 2], 0}, {64.5, -13.5, 0}], 
      NCache[{78.5, Rational[27, 2], 7}, {78.5, 13.5, 7}]]}, {{{1., 0., 0.}, {
     0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[1, 1, 0.85], 
     CuboidBox[NCache[{88.5, Rational[-17, 2], 0}, {88.5, -8.5, 0}], 
      NCache[{102.5, Rational[17, 2], 13}, {102.5, 8.5, 13}]]}, {{{1., 0., 
     0.}, {0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[1, 0.5, 0.5], CuboidBox[{111.5, -11, 0}, {120.5, 11, 15}]}, {{{
     1., 0., 0.}, {0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   GeometricTransformation3DBox[
    {RGBColor[1, 0.5, 0.5], CuboidBox[{128.5, -12, 0}, {134.5, 12, 29}]}, {{{
     1., 0., 0.}, {0., 1., 0.}, {0., 0., 1.}}, {0., 0., 0.}}], 
   SphereBox[{-6.5, 0, 14.}, 1], SphereBox[{-6.2, 0, 14.}, 1], 
   SphereBox[{-5.9, 0, 14.}, 1], SphereBox[{-5.6, 0, 14.}, 1], 
   SphereBox[{-5.3, 0, 14.}, 1], SphereBox[{-5., 0, 14.}, 1], 
   SphereBox[{-4.7, 0, 14.}, 1], SphereBox[{-4.4, 0, 14.}, 1], 
   SphereBox[{-4.1, 0, 14.}, 1], SphereBox[{-3.8000000000000003`, 0, 14.}, 1],
    SphereBox[{-3.5, 0, 14.}, 1], SphereBox[{-3.2, 0, 14.}, 1], 
   SphereBox[{-2.9000000000000004`, 0, 14.}, 1], SphereBox[{-2.6, 0, 14.}, 1],
    SphereBox[{-2.3, 0, 14.}, 1], SphereBox[{-2., 0, 14.}, 1], 
   SphereBox[{-1.7000000000000002`, 0, 14.}, 1], 
   SphereBox[{-1.4000000000000004`, 0, 14.}, 1], 
   SphereBox[{-1.1000000000000005`, 0, 14.}, 1], 
   SphereBox[{-0.7999999999999998, 0, 14.}, 1], SphereBox[{-0.5, 0, 14.}, 1], 
   SphereBox[{-0.20000000000000018`, 0, 14.}, 1], 
   SphereBox[{0.09999999999999964, 0, 14.}, 1], 
   SphereBox[{0.39999999999999947`, 0, 14.}, 1], 
   SphereBox[{0.6999999999999993, 0, 14.}, 1], SphereBox[{1., 0, 14.}, 1], 
   SphereBox[{1.2999999999999998`, 0, 14.}, 1], 
   SphereBox[{1.5999999999999996`, 0, 14.}, 1], 
   SphereBox[{1.9000000000000004`, 0, 14.}, 1], 
   SphereBox[{2.1999999999999993`, 0, 14.}, 1], SphereBox[{2.5, 0, 14.}, 1], 
   SphereBox[{2.799999999999999, 0, 14.}, 1], 
   SphereBox[{3.0999999999999996`, 0, 14.}, 1], 
   SphereBox[{3.4000000000000004`, 0, 14.}, 1], 
   SphereBox[{3.6999999999999993`, 0, 14.}, 1], SphereBox[{4., 0, 14.}, 1], 
   SphereBox[{4.299999999999999, 0, 14.}, 1], SphereBox[{4.6, 0, 14.}, 1], 
   SphereBox[{4.9, 0, 14.}, 1], SphereBox[{5.199999999999999, 0, 14.}, 1], 
   SphereBox[{5.5, 0, 14.}, 1], SphereBox[{5.799999999999999, 0, 14.}, 1], 
   SphereBox[{6.1, 0, 14.}, 1], SphereBox[{6.4, 0, 14.}, 1], 
   SphereBox[{6.5, 0, 14.}, 1], SphereBox[{6.8, 0, 15.560000000000002`}, 1], 
   SphereBox[{7.1, 0, 16.639999999999986`}, 1], 
   SphereBox[{7.4, 0, 17.24000000000001}, 1], 
   SphereBox[{7.7, 0, 17.360000000000014`}, 1], SphereBox[{8., 0, 17.}, 1], 
   SphereBox[{8.3, 0, 16.160000000000025`}, 1], 
   SphereBox[{8.6, 0, 14.839999999999975`}, 1], 
   SphereBox[{8.9, 0, 13.04000000000002}, 1], 
   SphereBox[{9.2, 0, 10.760000000000048`}, 1], 
   SphereBox[{9.5, 0, 8.000000000000057}, 1], SphereBox[{9.5, 0, 8.}, 1], 
   SphereBox[{9.8, 0, 8.}, 1], SphereBox[{10.1, 0, 8.}, 1], 
   SphereBox[{10.4, 0, 8.}, 1], SphereBox[{10.7, 0, 8.}, 1], 
   SphereBox[{11., 0, 8.}, 1], SphereBox[{11.3, 0, 8.}, 1], 
   SphereBox[{11.6, 0, 8.}, 1], SphereBox[{11.9, 0, 8.}, 1], 
   SphereBox[{12.2, 0, 8.}, 1], SphereBox[{12.5, 0, 8.}, 1], 
   SphereBox[{12.8, 0, 8.}, 1], SphereBox[{13.1, 0, 8.}, 1], 
   SphereBox[{13.4, 0, 8.}, 1], SphereBox[{13.7, 0, 8.}, 1], 
   SphereBox[{14., 0, 8.}, 1], SphereBox[{14.3, 0, 8.}, 1], 
   SphereBox[{14.6, 0, 8.}, 1], SphereBox[{14.899999999999999`, 0, 8.}, 1], 
   SphereBox[{15.2, 0, 8.}, 1], SphereBox[{15.5, 0, 8.}, 1], 
   SphereBox[{15.8, 0, 8.}, 1], SphereBox[{16.1, 0, 8.}, 1], 
   SphereBox[{16.4, 0, 8.}, 1], SphereBox[{16.7, 0, 8.}, 1], 
   SphereBox[{17., 0, 8.}, 1], SphereBox[{17.3, 0, 8.}, 1], 
   SphereBox[{17.6, 0, 8.}, 1], SphereBox[{17.9, 0, 8.}, 1], 
   SphereBox[{18.2, 0, 8.}, 1], SphereBox[{18.5, 0, 8.}, 1], 
   SphereBox[{18.799999999999997`, 0, 8.}, 1], SphereBox[{19.1, 0, 8.}, 1], 
   SphereBox[{19.4, 0, 8.}, 1], SphereBox[{19.7, 0, 8.}, 1], 
   SphereBox[{20., 0, 8.}, 1], SphereBox[{20.299999999999997`, 0, 8.}, 1], 
   SphereBox[{20.6, 0, 8.}, 1], SphereBox[{20.9, 0, 8.}, 1], 
   SphereBox[{21.2, 0, 8.}, 1], SphereBox[{21.5, 0, 8.}, 1], 
   SphereBox[{21.799999999999997`, 0, 8.}, 1], SphereBox[{22.1, 0, 8.}, 1], 
   SphereBox[{22.4, 0, 8.}, 1], SphereBox[{22.7, 0, 8.}, 1], 
   SphereBox[{23., 0, 8.}, 1], SphereBox[{23.299999999999997`, 0, 8.}, 1], 
   SphereBox[{23.6, 0, 8.}, 1], SphereBox[{23.9, 0, 8.}, 1], 
   SphereBox[{24.2, 0, 8.}, 1], SphereBox[{24.5, 0, 8.}, 1], 
   SphereBox[{24.799999999999997`, 0, 8.}, 1], SphereBox[{25.1, 0, 8.}, 1], 
   SphereBox[{25.4, 0, 8.}, 1], SphereBox[{25.5, 0, 8.}, 1], 
   SphereBox[{25.8, 0, 12.33874999999989}, 1], 
   SphereBox[{26.1, 0, 16.205000000000382`}, 1], 
   SphereBox[{26.4, 0, 19.59875000000011}, 1], 
   SphereBox[{26.7, 0, 22.519999999999527`}, 1], 
   SphereBox[{27., 0, 24.96875}, 1], 
   SphereBox[{27.3, 0, 26.94499999999971}, 1], 
   SphereBox[{27.6, 0, 28.448750000000018`}, 1], 
   SphereBox[{27.9, 0, 29.479999999999563`}, 1], 
   SphereBox[{28.2, 0, 30.03874999999971}, 1], 
   SphereBox[{28.5, 0, 30.125}, 1], 
   SphereBox[{28.8, 0, 29.738749999999527`}, 1], 
   SphereBox[{29.1, 0, 28.88000000000011}, 1], 
   SphereBox[{29.4, 0, 27.548749999999927`}, 1], SphereBox[{29.5, 0, 27.}, 1],
    SphereBox[{29.8, 0, 27.}, 1], SphereBox[{30.1, 0, 27.}, 1], 
   SphereBox[{30.4, 0, 27.}, 1], SphereBox[{30.7, 0, 27.}, 1], 
   SphereBox[{31., 0, 27.}, 1], SphereBox[{31.3, 0, 27.}, 1], 
   SphereBox[{31.6, 0, 27.}, 1], SphereBox[{31.9, 0, 27.}, 1], 
   SphereBox[{32.2, 0, 27.}, 1], SphereBox[{32.5, 0, 27.}, 1], 
   SphereBox[{32.8, 0, 27.}, 1], SphereBox[{33.1, 0, 27.}, 1], 
   SphereBox[{33.4, 0, 27.}, 1], SphereBox[{33.7, 0, 27.}, 1], 
   SphereBox[{34., 0, 27.}, 1], SphereBox[{34.3, 0, 27.}, 1], 
   SphereBox[{34.5, 0, 27.}, 1], SphereBox[{34.8, 0, 27.179062499999986`}, 1],
    SphereBox[{35.1, 0, 27.34125000000003}, 1], 
   SphereBox[{35.4, 0, 27.48656249999999}, 1], 
   SphereBox[{35.7, 0, 27.61500000000001}, 1], 
   SphereBox[{36., 0, 27.7265625}, 1], 
   SphereBox[{36.3, 0, 27.821249999999964`}, 1], 
   SphereBox[{36.6, 0, 27.899062500000014`}, 1], 
   SphereBox[{36.9, 0, 27.95999999999998}, 1], 
   SphereBox[{37.2, 0, 28.004062500000032`}, 1], 
   SphereBox[{37.5, 0, 28.03125}, 1], 
   SphereBox[{37.8, 0, 28.041562499999998`}, 1], 
   SphereBox[{38.1, 0, 28.035000000000025`}, 1], 
   SphereBox[{38.4, 0, 28.011562499999968`}, 1], 
   SphereBox[{38.7, 0, 27.971250000000055`}, 1], 
   SphereBox[{39., 0, 27.9140625}, 1], 
   SphereBox[{39.3, 0, 27.839999999999975`}, 1], 
   SphereBox[{39.6, 0, 27.749062500000036`}, 1], 
   SphereBox[{39.9, 0, 27.641250000000014`}, 1], 
   SphereBox[{40.2, 0, 27.51656250000002}, 1], 
   SphereBox[{40.5, 0, 27.375}, 1], 
   SphereBox[{40.8, 0, 27.216562499999952`}, 1], 
   SphereBox[{41.1, 0, 27.04124999999999}, 1], 
   SphereBox[{41.4, 0, 26.849062500000002`}, 1], 
   SphereBox[{41.7, 0, 26.639999999999986`}, 1], 
   SphereBox[{42., 0, 26.4140625}, 1], 
   SphereBox[{42.3, 0, 26.171249999999986`}, 1], SphereBox[{42.5, 0, 26.}, 1],
    SphereBox[{42.8, 0, 26.}, 1], SphereBox[{43.1, 0, 26.}, 1], 
   SphereBox[{43.4, 0, 26.}, 1], SphereBox[{43.7, 0, 26.}, 1], 
   SphereBox[{44., 0, 26.}, 1], SphereBox[{44.3, 0, 26.}, 1], 
   SphereBox[{44.6, 0, 26.}, 1], SphereBox[{44.9, 0, 26.}, 1], 
   SphereBox[{45.2, 0, 26.}, 1], SphereBox[{45.5, 0, 26.}, 1], 
   SphereBox[{45.8, 0, 26.}, 1], SphereBox[{46.1, 0, 26.}, 1], 
   SphereBox[{46.4, 0, 26.}, 1], SphereBox[{46.7, 0, 26.}, 1], 
   SphereBox[{47., 0, 26.}, 1], SphereBox[{47.3, 0, 26.}, 1], 
   SphereBox[{47.6, 0, 26.}, 1], SphereBox[{47.9, 0, 26.}, 1], 
   SphereBox[{48.2, 0, 26.}, 1], SphereBox[{48.5, 0, 26.}, 1], 
   SphereBox[{48.8, 0, 26.}, 1], SphereBox[{49.1, 0, 26.}, 1], 
   SphereBox[{49.4, 0, 26.}, 1], SphereBox[{49.7, 0, 26.}, 1], 
   SphereBox[{50., 0, 26.}, 1], SphereBox[{50.3, 0, 26.}, 1], 
   SphereBox[{50.6, 0, 26.}, 1], SphereBox[{50.9, 0, 26.}, 1], 
   SphereBox[{51.2, 0, 26.}, 1], SphereBox[{51.5, 0, 26.}, 1], 
   SphereBox[{51.8, 0, 26.}, 1], SphereBox[{52.1, 0, 26.}, 1], 
   SphereBox[{52.4, 0, 26.}, 1], SphereBox[{52.7, 0, 26.}, 1], 
   SphereBox[{53., 0, 26.}, 1], SphereBox[{53.3, 0, 26.}, 1], 
   SphereBox[{53.6, 0, 26.}, 1], SphereBox[{53.9, 0, 26.}, 1], 
   SphereBox[{54.2, 0, 26.}, 1], SphereBox[{54.5, 0, 26.}, 1], 
   SphereBox[{54.8, 0, 26.}, 1], SphereBox[{55.1, 0, 26.}, 1], 
   SphereBox[{55.4, 0, 26.}, 1], SphereBox[{55.5, 0, 26.}, 1], 
   SphereBox[{55.8, 0, 26.822222222221626`}, 1], 
   SphereBox[{56.1, 0, 27.555555555555657`}, 1], 
   SphereBox[{56.4, 0, 28.199999999999363`}, 1], 
   SphereBox[{56.7, 0, 28.755555555555475`}, 1], 
   SphereBox[{57., 0, 29.22222222222217}, 1], 
   SphereBox[{57.3, 0, 29.59999999999991}, 1], 
   SphereBox[{57.6, 0, 29.888888888888687`}, 1], 
   SphereBox[{57.9, 0, 30.08888888888896}, 1], 
   SphereBox[{58.2, 0, 30.199999999999818`}, 1], 
   SphereBox[{58.5, 0, 30.22222222222217}, 1], 
   SphereBox[{58.8, 0, 30.155555555555566`}, 1], SphereBox[{59.1, 0, 30.}, 1],
    SphereBox[{59.4, 0, 29.755555555555475`}, 1], 
   SphereBox[{59.7, 0, 29.42222222222199}, 1], 
   SphereBox[{60., 0, 28.999999999999545`}, 1], 
   SphereBox[{60.3, 0, 28.48888888888905}, 1], 
   SphereBox[{60.6, 0, 27.88888888888914}, 1], 
   SphereBox[{60.9, 0, 27.200000000000273`}, 1], 
   SphereBox[{61.2, 0, 26.42222222222199}, 1], 
   SphereBox[{61.5, 0, 25.555555555555202`}, 1], 
   SphereBox[{61.8, 0, 24.599999999999454`}, 1], 
   SphereBox[{62.1, 0, 23.555555555555202`}, 1], 
   SphereBox[{62.4, 0, 22.422222222221535`}, 1], 
   SphereBox[{62.7, 0, 21.200000000000273`}, 1], 
   SphereBox[{63., 0, 19.88888888888914}, 1], 
   SphereBox[{63.3, 0, 18.48888888888905}, 1], 
   SphereBox[{63.6, 0, 17.000000000000455`}, 1], 
   SphereBox[{63.9, 0, 15.42222222222199}, 1], 
   SphereBox[{64.2, 0, 13.755555555555475`}, 1], SphereBox[{64.5, 0, 12.}, 1],
    SphereBox[{64.5, 0, 12.}, 1], SphereBox[{64.8, 0, 12.}, 1], 
   SphereBox[{65.1, 0, 12.}, 1], SphereBox[{65.4, 0, 12.}, 1], 
   SphereBox[{65.7, 0, 12.}, 1], SphereBox[{66., 0, 12.}, 1], 
   SphereBox[{66.3, 0, 12.}, 1], SphereBox[{66.6, 0, 12.}, 1], 
   SphereBox[{66.9, 0, 12.}, 1], SphereBox[{67.2, 0, 12.}, 1], 
   SphereBox[{67.5, 0, 12.}, 1], SphereBox[{67.8, 0, 12.}, 1], 
   SphereBox[{68.1, 0, 12.}, 1], SphereBox[{68.4, 0, 12.}, 1], 
   SphereBox[{68.7, 0, 12.}, 1], SphereBox[{69., 0, 12.}, 1], 
   SphereBox[{69.3, 0, 12.}, 1], SphereBox[{69.6, 0, 12.}, 1], 
   SphereBox[{69.9, 0, 12.}, 1], SphereBox[{70.2, 0, 12.}, 1], 
   SphereBox[{70.5, 0, 12.}, 1], SphereBox[{70.8, 0, 12.}, 1], 
   SphereBox[{71.1, 0, 12.}, 1], SphereBox[{71.4, 0, 12.}, 1], 
   SphereBox[{71.7, 0, 12.}, 1], SphereBox[{72., 0, 12.}, 1], 
   SphereBox[{72.3, 0, 12.}, 1], SphereBox[{72.6, 0, 12.}, 1], 
   SphereBox[{72.9, 0, 12.}, 1], SphereBox[{73.2, 0, 12.}, 1], 
   SphereBox[{73.5, 0, 12.}, 1], SphereBox[{73.8, 0, 12.}, 1], 
   SphereBox[{74.1, 0, 12.}, 1], SphereBox[{74.4, 0, 12.}, 1], 
   SphereBox[{74.7, 0, 12.}, 1], SphereBox[{75., 0, 12.}, 1], 
   SphereBox[{75.3, 0, 12.}, 1], SphereBox[{75.6, 0, 12.}, 1], 
   SphereBox[{75.9, 0, 12.}, 1], SphereBox[{76.2, 0, 12.}, 1], 
   SphereBox[{76.5, 0, 12.}, 1], SphereBox[{76.8, 0, 12.}, 1], 
   SphereBox[{77.1, 0, 12.}, 1], SphereBox[{77.4, 0, 12.}, 1], 
   SphereBox[{77.7, 0, 12.}, 1], SphereBox[{78., 0, 12.}, 1], 
   SphereBox[{78.3, 0, 12.}, 1], SphereBox[{78.5, 0, 12.}, 1], 
   SphereBox[{78.8, 0, 12.645599999999831`}, 1], 
   SphereBox[{79.1, 0, 13.26240000000007}, 1], 
   SphereBox[{79.4, 0, 13.850400000000263`}, 1], 
   SphereBox[{79.7, 0, 14.409599999999955`}, 1], 
   SphereBox[{80., 0, 14.940000000000055`}, 1], 
   SphereBox[{80.3, 0, 15.441600000000108`}, 1], 
   SphereBox[{80.6, 0, 15.914400000000114`}, 1], 
   SphereBox[{80.9, 0, 16.358400000000074`}, 1], 
   SphereBox[{81.2, 0, 16.773599999999988`}, 1], 
   SphereBox[{81.5, 0, 17.16000000000031}, 1], 
   SphereBox[{81.8, 0, 17.517599999999675`}, 1], 
   SphereBox[{82.1, 0, 17.846399999999903`}, 1], 
   SphereBox[{82.4, 0, 18.146400000000085`}, 1], 
   SphereBox[{82.7, 0, 18.417599999999766`}, 1], 
   SphereBox[{83., 0, 18.659999999999854`}, 1], 
   SphereBox[{83.3, 0, 18.873599999999897`}, 1], 
   SphereBox[{83.6, 0, 19.058399999999892`}, 1], 
   SphereBox[{83.9, 0, 19.214400000000296`}, 1], 
   SphereBox[{84.2, 0, 19.3416000000002}, 1], 
   SphereBox[{84.5, 0, 19.440000000000055`}, 1], 
   SphereBox[{84.8, 0, 19.509599999999864`}, 1], 
   SphereBox[{85.1, 0, 19.55040000000008}, 1], 
   SphereBox[{85.4, 0, 19.562400000000252`}, 1], 
   SphereBox[{85.7, 0, 19.545600000000377`}, 1], SphereBox[{86., 0, 19.5}, 1],
    SphereBox[{86.3, 0, 19.42560000000003}, 1], 
   SphereBox[{86.6, 0, 19.322400000000016`}, 1], 
   SphereBox[{86.9, 0, 19.190399999999954`}, 1], 
   SphereBox[{87.2, 0, 19.0296000000003}, 1], 
   SphereBox[{87.5, 0, 18.840000000000146`}, 1], 
   SphereBox[{87.8, 0, 18.621599999999944`}, 1], 
   SphereBox[{88.1, 0, 18.37440000000015}, 1], 
   SphereBox[{88.4, 0, 18.098399999999856`}, 1], SphereBox[{88.5, 0, 18.}, 1],
    SphereBox[{88.8, 0, 18.}, 1], SphereBox[{89.1, 0, 18.}, 1], 
   SphereBox[{89.4, 0, 18.}, 1], SphereBox[{89.7, 0, 18.}, 1], 
   SphereBox[{90., 0, 18.}, 1], SphereBox[{90.3, 0, 18.}, 1], 
   SphereBox[{90.6, 0, 18.}, 1], SphereBox[{90.9, 0, 18.}, 1], 
   SphereBox[{91.2, 0, 18.}, 1], SphereBox[{91.5, 0, 18.}, 1], 
   SphereBox[{91.8, 0, 18.}, 1], SphereBox[{92.1, 0, 18.}, 1], 
   SphereBox[{92.4, 0, 18.}, 1], SphereBox[{92.7, 0, 18.}, 1], 
   SphereBox[{93., 0, 18.}, 1], SphereBox[{93.3, 0, 18.}, 1], 
   SphereBox[{93.6, 0, 18.}, 1], SphereBox[{93.9, 0, 18.}, 1], 
   SphereBox[{94.2, 0, 18.}, 1], SphereBox[{94.5, 0, 18.}, 1], 
   SphereBox[{94.8, 0, 18.}, 1], SphereBox[{95.1, 0, 18.}, 1], 
   SphereBox[{95.4, 0, 18.}, 1], SphereBox[{95.7, 0, 18.}, 1], 
   SphereBox[{96., 0, 18.}, 1], SphereBox[{96.3, 0, 18.}, 1], 
   SphereBox[{96.6, 0, 18.}, 1], SphereBox[{96.9, 0, 18.}, 1], 
   SphereBox[{97.2, 0, 18.}, 1], SphereBox[{97.5, 0, 18.}, 1], 
   SphereBox[{97.8, 0, 18.}, 1], SphereBox[{98.1, 0, 18.}, 1], 
   SphereBox[{98.4, 0, 18.}, 1], SphereBox[{98.7, 0, 18.}, 1], 
   SphereBox[{99., 0, 18.}, 1], SphereBox[{99.3, 0, 18.}, 1], 
   SphereBox[{99.6, 0, 18.}, 1], SphereBox[{99.9, 0, 18.}, 1], 
   SphereBox[{100.2, 0, 18.}, 1], SphereBox[{100.5, 0, 18.}, 1], 
   SphereBox[{100.8, 0, 18.}, 1], SphereBox[{101.1, 0, 18.}, 1], 
   SphereBox[{101.4, 0, 18.}, 1], SphereBox[{101.7, 0, 18.}, 1], 
   SphereBox[{102., 0, 18.}, 1], SphereBox[{102.3, 0, 18.}, 1], 
   SphereBox[{102.5, 0, 18.}, 1], 
   SphereBox[{102.8, 0, 18.324444444443998`}, 1], 
   SphereBox[{103.1, 0, 18.63111111111084}, 1], 
   SphereBox[{103.4, 0, 18.919999999999618`}, 1], 
   SphereBox[{103.7, 0, 19.191111111110786`}, 1], 
   SphereBox[{104., 0, 19.44444444444389}, 1], 
   SphereBox[{104.3, 0, 19.67999999999938}, 1], 
   SphereBox[{104.6, 0, 19.89777777777772}, 1], 
   SphereBox[{104.9, 0, 20.097777777777537`}, 1], 
   SphereBox[{105.2, 0, 20.27999999999929}, 1], 
   SphereBox[{105.5, 0, 20.444444444444343`}, 1], 
   SphereBox[{105.8, 0, 20.591111111110877`}, 1], 
   SphereBox[{106.1, 0, 20.719999999999345`}, 1], 
   SphereBox[{106.4, 0, 20.831111111111113`}, 1], 
   SphereBox[{106.7, 0, 20.92444444444436}, 1], SphereBox[{107., 0, 21.}, 1], 
   SphereBox[{107.3, 0, 21.05777777777712}, 1], 
   SphereBox[{107.6, 0, 21.097777777777537`}, 1], 
   SphereBox[{107.9, 0, 21.119999999999436`}, 1], 
   SphereBox[{108.2, 0, 21.124444444444634`}, 1], 
   SphereBox[{108.5, 0, 21.11111111111086}, 1], 
   SphereBox[{108.8, 0, 21.079999999999927`}, 1], 
   SphereBox[{109.1, 0, 21.03111111111093}, 1], 
   SphereBox[{109.4, 0, 20.964444444444325`}, 1], 
   SphereBox[{109.7, 0, 20.879999999999654`}, 1], 
   SphereBox[{110., 0, 20.777777777777374`}, 1], 
   SphereBox[{110.3, 0, 20.657777777777483`}, 1], 
   SphereBox[{110.6, 0, 20.519999999999982`}, 1], 
   SphereBox[{110.9, 0, 20.36444444444396}, 1], 
   SphereBox[{111.2, 0, 20.191111111110786`}, 1], 
   SphereBox[{111.5, 0, 19.999999999999545`}, 1], 
   SphereBox[{111.5, 0, 20.}, 1], SphereBox[{111.8, 0, 20.}, 1], 
   SphereBox[{112.1, 0, 20.}, 1], SphereBox[{112.4, 0, 20.}, 1], 
   SphereBox[{112.7, 0, 20.}, 1], SphereBox[{113., 0, 20.}, 1], 
   SphereBox[{113.3, 0, 20.}, 1], SphereBox[{113.6, 0, 20.}, 1], 
   SphereBox[{113.9, 0, 20.}, 1], SphereBox[{114.2, 0, 20.}, 1], 
   SphereBox[{114.5, 0, 20.}, 1], SphereBox[{114.8, 0, 20.}, 1], 
   SphereBox[{115.1, 0, 20.}, 1], SphereBox[{115.4, 0, 20.}, 1], 
   SphereBox[{115.7, 0, 20.}, 1], SphereBox[{116., 0, 20.}, 1], 
   SphereBox[{116.3, 0, 20.}, 1], SphereBox[{116.6, 0, 20.}, 1], 
   SphereBox[{116.9, 0, 20.}, 1], SphereBox[{117.2, 0, 20.}, 1], 
   SphereBox[{117.5, 0, 20.}, 1], SphereBox[{117.8, 0, 20.}, 1], 
   SphereBox[{118.1, 0, 20.}, 1], SphereBox[{118.4, 0, 20.}, 1], 
   SphereBox[{118.7, 0, 20.}, 1], SphereBox[{119., 0, 20.}, 1], 
   SphereBox[{119.3, 0, 20.}, 1], SphereBox[{119.6, 0, 20.}, 1], 
   SphereBox[{119.9, 0, 20.}, 1], SphereBox[{120.2, 0, 20.}, 1], 
   SphereBox[{120.5, 0, 20.}, 1], SphereBox[{120.5, 0, 20.}, 1], 
   SphereBox[{120.8, 0, 21.68000000000029}, 1], 
   SphereBox[{121.1, 0, 23.270000000000437`}, 1], 
   SphereBox[{121.4, 0, 24.770000000000437`}, 1], 
   SphereBox[{121.7, 0, 26.18000000000029}, 1], SphereBox[{122., 0, 27.5}, 1],
    SphereBox[{122.3, 0, 28.729999999999563`}, 1], 
   SphereBox[{122.6, 0, 29.8700000000008}, 1], 
   SphereBox[{122.9, 0, 30.919999999998254`}, 1], 
   SphereBox[{123.2, 0, 31.8799999999992}, 1], 
   SphereBox[{123.5, 0, 32.75}, 1], 
   SphereBox[{123.8, 0, 33.530000000000655`}, 1], 
   SphereBox[{124.1, 0, 34.220000000001164`}, 1], 
   SphereBox[{124.4, 0, 34.81999999999971}, 1], 
   SphereBox[{124.7, 0, 35.32999999999993}, 1], 
   SphereBox[{125., 0, 35.75}, 1], 
   SphereBox[{125.3, 0, 36.07999999999993}, 1], 
   SphereBox[{125.6, 0, 36.31999999999971}, 1], 
   SphereBox[{125.9, 0, 36.469999999999345`}, 1], 
   SphereBox[{126.2, 0, 36.529999999998836`}, 1], 
   SphereBox[{126.5, 0, 36.5}, 1], 
   SphereBox[{126.8, 0, 36.38000000000102}, 1], 
   SphereBox[{127.1, 0, 36.17000000000189}, 1], 
   SphereBox[{127.4, 0, 35.86999999999898}, 1], 
   SphereBox[{127.7, 0, 35.47999999999956}, 1], SphereBox[{128., 0, 35.}, 1], 
   SphereBox[{128.3, 0, 34.43000000000029}, 1], SphereBox[{128.5, 0, 34.}, 1],
    SphereBox[{128.8, 0, 34.}, 1], SphereBox[{129.1, 0, 34.}, 1], 
   SphereBox[{129.4, 0, 34.}, 1], SphereBox[{129.7, 0, 34.}, 1], 
   SphereBox[{130., 0, 34.}, 1], SphereBox[{130.3, 0, 34.}, 1], 
   SphereBox[{130.6, 0, 34.}, 1], SphereBox[{130.9, 0, 34.}, 1], 
   SphereBox[{131.2, 0, 34.}, 1], SphereBox[{131.5, 0, 34.}, 1], 
   SphereBox[{131.8, 0, 34.}, 1], SphereBox[{132.1, 0, 34.}, 1], 
   SphereBox[{132.4, 0, 34.}, 1], SphereBox[{132.7, 0, 34.}, 1], 
   SphereBox[{133., 0, 34.}, 1], SphereBox[{133.3, 0, 34.}, 1], 
   SphereBox[{133.6, 0, 34.}, 1], SphereBox[{133.9, 0, 34.}, 1], 
   SphereBox[{134.2, 0, 34.}, 1], SphereBox[{134.5, 0, 34.}, 1]},
  Boxed->False,
  ImageSize->{878.334045595142, 250.83332336611258`},
  ViewPoint->{0.4114270411422466, -3.2948067635855094`, 0.6519019715019478},
  ViewVertical->{0.059562564568494555`, -10.28802170749283, 
   9.97381709358678}]], "Output",
 CellChangeTimes->{{3.612863591484375*^9, 3.612863623578125*^9}, {
   3.6128639890625*^9, 3.6128640199375*^9}, {3.6128652228125*^9, 
   3.612865252578125*^9}, {3.61286537978125*^9, 3.612865384296875*^9}, {
   3.612865422484375*^9, 3.61286542703125*^9}, 3.612865575390625*^9, 
   3.61286560615625*^9, 3.612865641890625*^9, 3.612865691890625*^9, 
   3.612865742296875*^9, {3.612866226421875*^9, 3.61286623421875*^9}, {
   3.61286627659375*^9, 3.612866302953125*^9}, {3.61286642103125*^9, 
   3.612866437953125*^9}, 3.612866772171875*^9, 3.612866837203125*^9, 
   3.612866886453125*^9, 3.6128836434071107`*^9, 3.6128837733155413`*^9, 
   3.612884162166782*^9, 3.6128842691078987`*^9, 3.612884345615275*^9, 
   3.6128843994553547`*^9, {3.6128844604578433`*^9, 3.612884468999332*^9}, 
   3.6128893241060286`*^9, 3.61293444134375*^9, 3.612940721703125*^9, 
   3.612940941828125*^9, 3.61294199784375*^9}]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"pos", " ", "=", " ", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"For", "[", 
   RowBox[{
    RowBox[{"i", "=", "1"}], ",", 
    RowBox[{"i", "\[LessEqual]", 
     RowBox[{"buildingNum", "-", "1"}]}], ",", 
    RowBox[{"i", "+=", "1"}], ",", 
    RowBox[{"AppendTo", "[", 
     RowBox[{"pos", ",", 
      RowBox[{"getCurvePoint", "[", 
       RowBox[{
        RowBox[{"getBuildingEnd", "[", "i", "]"}], ",", 
        RowBox[{"getBuildingBegin", "[", 
         RowBox[{"i", "+", "1"}], "]"}]}], "]"}]}], "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"posplane", "=", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"For", "[", 
   RowBox[{
    RowBox[{"i", "=", "1"}], ",", 
    RowBox[{"i", "\[LessEqual]", "buildingNum"}], ",", 
    RowBox[{"i", "+=", "1"}], ",", 
    RowBox[{"AppendTo", "[", 
     RowBox[{"posplane", ",", 
      RowBox[{"getLinePoint", "[", 
       RowBox[{
        RowBox[{"getBuildingBegin", "[", "i", "]"}], ",", 
        RowBox[{"getBuildingEnd", "[", "i", "]"}]}], "]"}]}], "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"poslist", " ", "=", " ", 
   RowBox[{"Flatten", "[", 
    RowBox[{
     RowBox[{"Riffle", "[", 
      RowBox[{"posplane", ",", "pos"}], "]"}], ",", "1"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"For", "[", 
  RowBox[{
   RowBox[{"i", "=", "1"}], ",", 
   RowBox[{"i", "\[LessEqual]", 
    RowBox[{"Length", "@", "poslist"}]}], ",", 
   RowBox[{"i", "+=", "1"}], ",", 
   RowBox[{
    RowBox[{"posV", " ", "=", 
     RowBox[{
     "poslist", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}]}], ";",
     " ", 
    RowBox[{"pause", "[", "5", "]"}]}]}], 
  "]"}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.612866333*^9, 3.61286634346875*^9}, {
   3.612866540421875*^9, 3.612866552703125*^9}, {3.612866589765625*^9, 
   3.61286661834375*^9}, {3.612866667875*^9, 3.612866668046875*^9}, {
   3.612866957296875*^9, 3.6128670255625*^9}, 3.612867129328125*^9, {
   3.6128839752670918`*^9, 3.61288398799482*^9}, {3.612941871890625*^9, 
   3.612941900703125*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Dynamic", "[", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"Graphics3D", "[", 
     RowBox[{"buildingCube", ",", 
      RowBox[{"ViewVector", "\[Rule]", 
       RowBox[{"viewvector", "[", 
        RowBox[{"posV", ",", 
         RowBox[{"{", 
          RowBox[{"1", ",", "0", ",", "0"}], "}"}]}], "]"}]}], ",", 
      RowBox[{"ViewAngle", "\[Rule]", 
       RowBox[{"90", " ", "Degree"}]}], ",", 
      RowBox[{"Boxed", "\[Rule]", "False"}], ",", 
      RowBox[{"ImageSize", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"300", ",", "300"}], "}"}]}]}], "]"}], ",", 
    RowBox[{"Graphics3D", "[", 
     RowBox[{
      RowBox[{"Flatten", "@", 
       RowBox[{"{", 
        RowBox[{"buildingCube", 
         RowBox[{"(*", 
          RowBox[{",", 
           RowBox[{
            RowBox[{
             RowBox[{"Sphere", "[", 
              RowBox[{"#", ",", "1"}], "]"}], "&"}], "/@", "poslist"}]}], 
          "*)"}], ",", "Red", ",", 
         RowBox[{
          RowBox[{
           RowBox[{"Sphere", "[", 
            RowBox[{"#", ",", "3"}], "]"}], "&"}], "@", "posV"}]}], "}"}]}], 
      ",", 
      RowBox[{"ImageSize", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"689", ",", "323"}], "}"}]}], ",", 
      RowBox[{"Boxed", "\[Rule]", "False"}]}], "]"}]}], "}"}], "]"}]], "Input",\

 CellChangeTimes->{{3.61294190334375*^9, 3.6129419211875*^9}}],

Cell[BoxData[
 DynamicBox[ToBoxes[{
    Graphics3D[$CellContext`buildingCube, 
     ViewVector -> $CellContext`viewvector[$CellContext`posV, {1, 0, 0}], 
     ViewAngle -> 90 Degree, Boxed -> False, ImageSize -> {300, 300}], 
    Graphics3D[
     Flatten[{$CellContext`buildingCube, Red, 
       (Sphere[#, 3]& )[$CellContext`posV]}], ImageSize -> {689, 323}, Boxed -> 
     False]}, StandardForm],
  ImageSizeCache->{847.5, {600., 184.}}]], "Output",
 CellChangeTimes->{
  3.612866439984375*^9, 3.612866567203125*^9, 3.612866620609375*^9, 
   3.61286673896875*^9, 3.612866961625*^9, 3.612866992671875*^9, 
   3.612867026203125*^9, 3.61286713090625*^9, 3.612880422362878*^9, 
   3.6128836517585883`*^9, 3.612884006599884*^9, 3.612884454266489*^9, 
   3.612940765828125*^9, 3.61294183646875*^9, {3.6129418913125*^9, 
   3.61294192175*^9}, 3.61294197503125*^9, 3.612942007921875*^9}]
}, Open  ]],

Cell[" ", "Text",
 Editable->False,
 Selectable->False,
 CellFrame->{{0, 0}, {0, 3}},
 ShowCellBracket->False,
 CellMargins->{{0, 0}, {1, 1}},
 CellElementSpacings->{"CellMinHeight"->1},
 CellFrameMargins->0,
 CellFrameColor->RGBColor[0, 0, 1],
 CellSize->{Inherited, 5}],

Cell[" ", "Text",
 Editable->False,
 Selectable->False,
 CellFrame->{{0, 0}, {0, 3}},
 ShowCellBracket->False,
 CellMargins->{{0, 0}, {1, 1}},
 CellElementSpacings->{"CellMinHeight"->1},
 CellFrameMargins->0,
 CellFrameColor->RGBColor[0, 0, 1],
 CellSize->{Inherited, 5}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"pos", " ", "=", " ", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"For", "[", 
   RowBox[{
    RowBox[{"i", "=", "1"}], ",", 
    RowBox[{"i", "\[LessEqual]", 
     RowBox[{"buildingNum", "-", "1"}]}], ",", 
    RowBox[{"i", "+=", "1"}], ",", 
    RowBox[{"AppendTo", "[", 
     RowBox[{"pos", ",", 
      RowBox[{"getCurvePoint", "[", 
       RowBox[{
        RowBox[{"getBuildingEnd", "[", "i", "]"}], ",", 
        RowBox[{"getBuildingBegin", "[", 
         RowBox[{"i", "+", "1"}], "]"}]}], "]"}]}], "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"posplane", "=", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"For", "[", 
   RowBox[{
    RowBox[{"i", "=", "1"}], ",", 
    RowBox[{"i", "\[LessEqual]", "buildingNum"}], ",", 
    RowBox[{"i", "+=", "1"}], ",", 
    RowBox[{"AppendTo", "[", 
     RowBox[{"posplane", ",", 
      RowBox[{"getLinePoint", "[", 
       RowBox[{
        RowBox[{"getBuildingBegin", "[", "i", "]"}], ",", 
        RowBox[{"getBuildingEnd", "[", "i", "]"}]}], "]"}]}], "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"poslist", " ", "=", " ", 
   RowBox[{"Flatten", "[", 
    RowBox[{
     RowBox[{"Riffle", "[", 
      RowBox[{"posplane", ",", "pos"}], "]"}], ",", "1"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dir", " ", "=", " ", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"For", "[", 
   RowBox[{
    RowBox[{"i", "=", "1"}], ",", 
    RowBox[{"i", "\[LessEqual]", 
     RowBox[{"buildingNum", "-", "1"}]}], ",", 
    RowBox[{"i", "+=", "1"}], ",", 
    RowBox[{"AppendTo", "[", 
     RowBox[{"dir", ",", 
      RowBox[{"Table", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"getBuildingBegin", "[", 
          RowBox[{"i", "+", "1"}], "]"}], "+", 
         RowBox[{"{", 
          RowBox[{"1", ",", "0", ",", "0"}], "}"}]}], ",", 
        RowBox[{"{", 
         RowBox[{"Length", "@", 
          RowBox[{
          "pos", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}]}], 
         "}"}]}], "]"}]}], "]"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dirplane", " ", "=", " ", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"For", "[", 
   RowBox[{
    RowBox[{"i", "=", "1"}], ",", 
    RowBox[{"i", "\[LessEqual]", "buildingNum"}], ",", 
    RowBox[{"i", "+=", "1"}], ",", 
    RowBox[{"AppendTo", "[", 
     RowBox[{"dirplane", ",", 
      RowBox[{"Table", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"getBuildingEnd", "[", "i", "]"}], "+", 
         RowBox[{"{", 
          RowBox[{"1", ",", "0", ",", "0"}], "}"}]}], ",", 
        RowBox[{"{", 
         RowBox[{"Length", "@", 
          RowBox[{
          "posplane", "\[LeftDoubleBracket]", "i", 
           "\[RightDoubleBracket]"}]}], "}"}]}], "]"}]}], "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"dirlist", " ", "=", " ", 
    RowBox[{"Flatten", "[", 
     RowBox[{
      RowBox[{"Riffle", "[", 
       RowBox[{"dirplane", ",", "dir"}], "]"}], ",", "1"}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{"For", "[", 
  RowBox[{
   RowBox[{"i", "=", "1"}], ",", 
   RowBox[{"i", "\[LessEqual]", 
    RowBox[{"Length", "@", "poslist"}]}], ",", 
   RowBox[{"i", "+=", "1"}], ",", 
   RowBox[{
    RowBox[{"posV", " ", "=", 
     RowBox[{
     "poslist", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}]}], ";", 
    RowBox[{"dirV", " ", "=", " ", 
     RowBox[{
     "dirlist", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}]}], ";",
     " ", 
    RowBox[{"pause", "[", "5", "]"}]}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.612866352609375*^9, 3.612866447625*^9}, 
   3.612866490671875*^9, 3.612866599375*^9, {3.6128806937764015`*^9, 
   3.612880748459529*^9}, {3.6128808494113035`*^9, 3.612880870770525*^9}, {
   3.612881054677044*^9, 3.6128811044778924`*^9}, {3.61288382749364*^9, 
   3.6128838290447283`*^9}, {3.612943070234375*^9, 3.612943131578125*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Dynamic", "[", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"Graphics3D", "[", 
     RowBox[{"buildingCube", ",", 
      RowBox[{"ViewVector", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"posV", ",", "dirV"}], "}"}]}], ",", 
      RowBox[{"ViewAngle", "\[Rule]", 
       RowBox[{"90", " ", "Degree"}]}], ",", 
      RowBox[{"Boxed", "\[Rule]", "False"}], ",", 
      RowBox[{"ImageSize", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"300", ",", "300"}], "}"}]}]}], "]"}], ",", 
    RowBox[{"Graphics3D", "[", 
     RowBox[{
      RowBox[{"Flatten", "@", 
       RowBox[{"{", 
        RowBox[{"buildingCube", ",", "Red", ",", 
         RowBox[{
          RowBox[{
           RowBox[{"Sphere", "[", 
            RowBox[{"#", ",", "3"}], "]"}], "&"}], "@", "posV"}], ",", 
         RowBox[{"arrow", "[", 
          RowBox[{"posV", ",", "dirV"}], "]"}]}], "}"}]}], ",", 
      RowBox[{"ImageSize", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"689", ",", "323"}], "}"}]}], ",", 
      RowBox[{"Boxed", "\[Rule]", "False"}]}], "]"}]}], "}"}], "]"}]], "Input",\

 CellChangeTimes->{{3.612880768260662*^9, 3.612880768981703*^9}, {
  3.6128809165201416`*^9, 3.6128809447857585`*^9}, {3.612943050390625*^9, 
  3.612943053078125*^9}, {3.612943169515625*^9, 3.61294319459375*^9}}],

Cell[BoxData[
 DynamicBox[ToBoxes[{
    Graphics3D[$CellContext`buildingCube, 
     ViewVector -> {$CellContext`posV, $CellContext`dirV}, ViewAngle -> 
     90 Degree, Boxed -> False, ImageSize -> {300, 300}], 
    Graphics3D[
     Flatten[{$CellContext`buildingCube, Red, 
       (Sphere[#, 3]& )[$CellContext`posV], 
       $CellContext`arrow[$CellContext`posV, $CellContext`dirV]}], 
     ImageSize -> {689, 323}, Boxed -> False]}, StandardForm],
  ImageSizeCache->{847.5, {600., 184.}}]], "Output",
 CellChangeTimes->{
  3.612880770140769*^9, 3.6128809461508365`*^9, 3.6128836058939652`*^9, {
   3.61294319528125*^9, 3.61294319759375*^9}}]
}, Open  ]],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.61288175219894*^9, 3.612881770595992*^9}}],

Cell[" ", "Text",
 Editable->False,
 Selectable->False,
 CellFrame->{{0, 0}, {0, 3}},
 ShowCellBracket->False,
 CellMargins->{{0, 0}, {1, 1}},
 CellElementSpacings->{"CellMinHeight"->1},
 CellFrameMargins->0,
 CellFrameColor->RGBColor[0, 0, 1],
 CellSize->{Inherited, 5}],

Cell[" ", "Text",
 Editable->False,
 Selectable->False,
 CellFrame->{{0, 0}, {0, 3}},
 ShowCellBracket->False,
 CellMargins->{{0, 0}, {1, 1}},
 CellElementSpacings->{"CellMinHeight"->1},
 CellFrameMargins->0,
 CellFrameColor->RGBColor[0, 0, 1],
 CellSize->{Inherited, 5}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"pos", " ", "=", " ", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"For", "[", 
   RowBox[{
    RowBox[{"i", "=", "1"}], ",", 
    RowBox[{"i", "\[LessEqual]", 
     RowBox[{"buildingNum", "-", "1"}]}], ",", 
    RowBox[{"i", "+=", "1"}], ",", 
    RowBox[{"AppendTo", "[", 
     RowBox[{"pos", ",", 
      RowBox[{"getCurvePoint", "[", 
       RowBox[{
        RowBox[{"getBuildingEnd", "[", "i", "]"}], ",", 
        RowBox[{"getBuildingBegin", "[", 
         RowBox[{"i", "+", "1"}], "]"}]}], "]"}]}], "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"posplane", "=", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"For", "[", 
   RowBox[{
    RowBox[{"i", "=", "1"}], ",", 
    RowBox[{"i", "\[LessEqual]", "buildingNum"}], ",", 
    RowBox[{"i", "+=", "1"}], ",", 
    RowBox[{"AppendTo", "[", 
     RowBox[{"posplane", ",", 
      RowBox[{"getLinePoint", "[", 
       RowBox[{
        RowBox[{"getBuildingBegin", "[", "i", "]"}], ",", 
        RowBox[{"getBuildingEnd", "[", "i", "]"}]}], "]"}]}], "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"poslist", " ", "=", " ", 
   RowBox[{"Flatten", "[", 
    RowBox[{
     RowBox[{"Riffle", "[", 
      RowBox[{"posplane", ",", "pos"}], "]"}], ",", "1"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dir2", " ", "=", " ", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"For", "[", 
   RowBox[{
    RowBox[{"i", "=", "1"}], ",", 
    RowBox[{"i", "\[LessEqual]", 
     RowBox[{"buildingNum", "-", "1"}]}], ",", 
    RowBox[{"i", "+=", "1"}], ",", 
    RowBox[{"AppendTo", "[", 
     RowBox[{"dir2", ",", 
      RowBox[{"Table", "[", 
       RowBox[{
        RowBox[{"normDir", "[", 
         RowBox[{
          RowBox[{"getBuildingBegin", "[", 
           RowBox[{"i", "+", "1"}], "]"}], "+", 
          RowBox[{"{", 
           RowBox[{"1", ",", "0", ",", "0"}], "}"}], "-", 
          RowBox[{
           RowBox[{
           "pos", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}], 
           "\[LeftDoubleBracket]", "k", "\[RightDoubleBracket]"}]}], "]"}], 
        ",", 
        RowBox[{"{", 
         RowBox[{"k", ",", 
          RowBox[{"Length", "@", 
           RowBox[{
           "pos", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}]}]}], 
         "}"}]}], "]"}]}], "]"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dirplane2", " ", "=", " ", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"For", "[", 
    RowBox[{
     RowBox[{"i", "=", "1"}], ",", 
     RowBox[{"i", "\[LessEqual]", "buildingNum"}], ",", 
     RowBox[{"i", "+=", "1"}], ",", 
     RowBox[{"AppendTo", "[", 
      RowBox[{"dirplane2", ",", 
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"normDir", "[", 
          RowBox[{
           RowBox[{"getBuildingEnd", "[", "i", "]"}], "+", 
           RowBox[{"{", 
            RowBox[{"1", ",", "0", ",", "0"}], "}"}], "-", 
           RowBox[{
            RowBox[{
            "posplane", "\[LeftDoubleBracket]", "i", 
             "\[RightDoubleBracket]"}], "\[LeftDoubleBracket]", "k", 
            "\[RightDoubleBracket]"}]}], "]"}], ",", 
         RowBox[{"{", 
          RowBox[{"k", ",", 
           RowBox[{"Length", "@", 
            RowBox[{
            "posplane", "\[LeftDoubleBracket]", "i", 
             "\[RightDoubleBracket]"}]}]}], "}"}]}], "]"}]}], "]"}]}], "]"}], 
   ";"}], "\[IndentingNewLine]", 
  RowBox[{
  "(*", "\:7f13\:548c\:89d2\:5ea6\:53d8\:5316", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dirlist2", " ", "=", " ", 
   RowBox[{"Flatten", "[", 
    RowBox[{
     RowBox[{"Riffle", "[", 
      RowBox[{"dirplane2", ",", "dir2"}], "]"}], ",", "1"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"For", "[", 
  RowBox[{
   RowBox[{"i", "=", "2"}], ",", 
   RowBox[{"i", "\[LessEqual]", " ", 
    RowBox[{"Length", "@", "dirlist"}]}], ",", 
   RowBox[{"i", "+=", "1"}], ",", 
   RowBox[{
    RowBox[{"anglediff", " ", "=", 
     RowBox[{
      RowBox[{"ArcTan", "[", 
       FractionBox[
        RowBox[{"dirlist2", "\[LeftDoubleBracket]", 
         RowBox[{"i", ",", "3"}], "\[RightDoubleBracket]"}], 
        RowBox[{"dirlist2", "\[LeftDoubleBracket]", 
         RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}]], "]"}], "-", 
      RowBox[{"ArcTan", "[", 
       FractionBox[
        RowBox[{"dirlist2", "\[LeftDoubleBracket]", 
         RowBox[{
          RowBox[{"i", "-", "1"}], ",", "3"}], "\[RightDoubleBracket]"}], 
        RowBox[{"dirlist2", "\[LeftDoubleBracket]", 
         RowBox[{
          RowBox[{"i", "-", "1"}], ",", "1"}], "\[RightDoubleBracket]"}]], 
       "]"}]}]}], ";", " ", 
    RowBox[{
     RowBox[{
     "dirlist2", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}], "=", 
     
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Abs", "[", "anglediff", "]"}], "<", 
        RowBox[{"3", " ", "\[Degree]"}]}], ",", 
       RowBox[{
       "dirlist2", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}], 
       ",", 
       RowBox[{
        RowBox[{"dirlist2", "\[LeftDoubleBracket]", 
         RowBox[{"i", "-", "1"}], "\[RightDoubleBracket]"}], ".", 
        RowBox[{"RotationMatrix", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"Sign", "[", "anglediff", "]"}], "*", "3"}], ")"}], 
           "\[Degree]"}], ",", 
          RowBox[{"{", 
           RowBox[{"0", ",", "1", ",", "0"}], "}"}]}], "]"}]}]}], "]"}]}]}]}],
   "]"}], "\[IndentingNewLine]", 
 RowBox[{"For", "[", 
  RowBox[{
   RowBox[{"i", "=", "1"}], ",", 
   RowBox[{"i", "\[LessEqual]", 
    RowBox[{"Length", "@", "poslist"}]}], ",", 
   RowBox[{"i", "+=", "1"}], ",", 
   RowBox[{
    RowBox[{"posV", " ", "=", 
     RowBox[{
     "poslist", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}]}], ";", 
    RowBox[{"dirV2", " ", "=", " ", 
     RowBox[{
     "dirlist2", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}]}], 
    ";", " ", 
    RowBox[{"pause", "[", "5", "]"}]}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.612882047743844*^9, 3.6128821076842723`*^9}, {
   3.612882335722316*^9, 3.6128824771544046`*^9}, {3.612882511777385*^9, 
   3.6128825276212916`*^9}, {3.612882570904767*^9, 3.612882706194505*^9}, {
   3.6128828174628696`*^9, 3.6128828788153787`*^9}, {3.6128830940896916`*^9, 
   3.6128831056443524`*^9}, {3.612883244157275*^9, 3.6128832455593553`*^9}, {
   3.612883328670109*^9, 3.6128833772218857`*^9}, 3.612883411752861*^9, {
   3.612883450236062*^9, 3.6128834787036905`*^9}, {3.6128838363051443`*^9, 
   3.6128838767924595`*^9}, {3.612938370421875*^9, 3.612938381171875*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Dynamic", "[", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"Graphics3D", "[", 
     RowBox[{"buildingCube", ",", 
      RowBox[{"ViewVector", "\[Rule]", 
       RowBox[{"viewvector", "[", 
        RowBox[{"posV", ",", "dirV2"}], "]"}]}], ",", 
      RowBox[{"ViewAngle", "\[Rule]", 
       RowBox[{"90", " ", "Degree"}]}], ",", 
      RowBox[{"Boxed", "\[Rule]", "False"}], ",", 
      RowBox[{"ImageSize", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"300", ",", "300"}], "}"}]}]}], "]"}], ",", 
    RowBox[{"Graphics3D", "[", 
     RowBox[{
      RowBox[{"Flatten", "@", 
       RowBox[{"{", 
        RowBox[{"buildingCube", ",", "Red", ",", 
         RowBox[{
          RowBox[{
           RowBox[{"Sphere", "[", 
            RowBox[{"#", ",", "3"}], "]"}], "&"}], "@", "posV"}], ",", 
         RowBox[{"arrow", "[", 
          RowBox[{"posV", ",", 
           RowBox[{"dirV2", "+", "posV"}]}], "]"}]}], "}"}]}], ",", 
      RowBox[{"ImageSize", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"689", ",", "323"}], "}"}]}], ",", 
      RowBox[{"Boxed", "\[Rule]", "False"}]}], "]"}]}], "}"}], "]"}]], "Input",\

 CellChangeTimes->{{3.612882112834567*^9, 3.612882124670244*^9}, 
   3.6128822042527957`*^9, {3.6128822557427406`*^9, 3.612882255954753*^9}, {
   3.61294372559375*^9, 3.612943736359375*^9}}],

Cell[BoxData[
 DynamicBox[ToBoxes[{
    Graphics3D[$CellContext`buildingCube, 
     ViewVector -> $CellContext`viewvector[$CellContext`posV, \
$CellContext`dirV2], ViewAngle -> 90 Degree, Boxed -> False], 
    Graphics3D[
     Flatten[{$CellContext`buildingCube, Red, 
       (Sphere[#, 3]& )[$CellContext`posV], 
       $CellContext`arrow[$CellContext`posV, $CellContext`dirV2 + \
$CellContext`posV]}], ImageSize -> {689, 323}, Boxed -> False]}, StandardForm],
  ImageSizeCache->{1079., {190., 198.}}]], "Output",
 CellChangeTimes->{3.612882125776307*^9, 3.6128822091750774`*^9, 
  3.6128822586559076`*^9, 3.61294364971875*^9, 3.612943726828125*^9}]
}, Open  ]],

Cell[" ", "Text",
 Editable->False,
 Selectable->False,
 CellFrame->{{0, 0}, {0, 3}},
 ShowCellBracket->False,
 CellMargins->{{0, 0}, {1, 1}},
 CellElementSpacings->{"CellMinHeight"->1},
 CellFrameMargins->0,
 CellFrameColor->RGBColor[0, 0, 1],
 CellSize->{Inherited, 5}],

Cell[" ", "Text",
 Editable->False,
 Selectable->False,
 CellFrame->{{0, 0}, {0, 3}},
 ShowCellBracket->False,
 CellMargins->{{0, 0}, {1, 1}},
 CellElementSpacings->{"CellMinHeight"->1},
 CellFrameMargins->0,
 CellFrameColor->RGBColor[0, 0, 1],
 CellSize->{Inherited, 5}],

Cell[" ", "Text",
 Editable->False,
 Selectable->False,
 CellFrame->{{0, 0}, {0, 3}},
 ShowCellBracket->False,
 CellMargins->{{0, 0}, {1, 1}},
 CellElementSpacings->{"CellMinHeight"->1},
 CellFrameMargins->0,
 CellFrameColor->RGBColor[0, 0, 1],
 CellSize->{Inherited, 5}],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", "\:5f00\:59cb\:6446\:5934\:8bbe\:7f6e", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"wavheadAngle", "=", 
     RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"wavheadPos", "=", 
     RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"headangleList", " ", "=", " ", 
     RowBox[{
      RowBox[{"Range", "[", 
       RowBox[{"0", ",", "45", ",", "3"}], "]"}], "~", "Join", "~", 
      RowBox[{"Range", "[", 
       RowBox[{"44", ",", 
        RowBox[{"-", "45"}], ",", 
        RowBox[{"-", "3"}]}], "]"}], "~", "Join", "~", 
      RowBox[{"Range", "[", 
       RowBox[{
        RowBox[{"-", "44"}], ",", "0", ",", "3"}], "]"}]}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"For", "[", 
     RowBox[{
      RowBox[{"i", "=", "1"}], ",", 
      RowBox[{"i", "\[LessEqual]", 
       RowBox[{"Length", "@", "headangleList"}]}], ",", 
      RowBox[{"i", "+=", "1"}], ",", 
      RowBox[{"AppendTo", "[", 
       RowBox[{"wavheadAngle", ",", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"10", ",", "0", ",", "0"}], "}"}], ".", 
         RowBox[{"RotationMatrix", "[", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{
             "headangleList", "\[LeftDoubleBracket]", "i", 
              "\[RightDoubleBracket]"}], "\[Degree]"}], "//", "N"}], ",", 
           RowBox[{"{", 
            RowBox[{"0", ",", "0", ",", "1"}], "}"}]}], "]"}]}]}], "]"}]}], 
     "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"wavheadPos", " ", "=", " ", 
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{"getBuildingBegin", "[", "1", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"Length", "@", "wavheadAngle"}], "}"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", "\:524d\:8fdb\:8fc7\:7a0b\:8bbe\:7f6e", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"pos", " ", "=", " ", 
     RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"For", "[", 
     RowBox[{
      RowBox[{"i", "=", "1"}], ",", 
      RowBox[{"i", "\[LessEqual]", 
       RowBox[{"buildingNum", "-", "1"}]}], ",", 
      RowBox[{"i", "+=", "1"}], ",", 
      RowBox[{"AppendTo", "[", 
       RowBox[{"pos", ",", 
        RowBox[{"getCurvePoint", "[", 
         RowBox[{
          RowBox[{"getBuildingEnd", "[", "i", "]"}], ",", 
          RowBox[{"getBuildingBegin", "[", 
           RowBox[{"i", "+", "1"}], "]"}]}], "]"}]}], "]"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"posplane", "=", 
     RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"For", "[", 
     RowBox[{
      RowBox[{"i", "=", "1"}], ",", 
      RowBox[{"i", "\[LessEqual]", "buildingNum"}], ",", 
      RowBox[{"i", "+=", "1"}], ",", 
      RowBox[{"AppendTo", "[", 
       RowBox[{"posplane", ",", 
        RowBox[{"getLinePoint", "[", 
         RowBox[{
          RowBox[{"getBuildingBegin", "[", "i", "]"}], ",", 
          RowBox[{"getBuildingEnd", "[", "i", "]"}]}], "]"}]}], "]"}]}], 
     "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"poslist", " ", "=", " ", 
     RowBox[{"Flatten", "[", 
      RowBox[{
       RowBox[{"Riffle", "[", 
        RowBox[{"posplane", ",", "pos"}], "]"}], ",", "1"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"poslist", "\[LeftDoubleBracket]", 
      RowBox[{";;", ",", 
       RowBox[{"1", ";;", "3", ";;", "2"}]}], "\[RightDoubleBracket]"}], " ", 
     "+=", 
     RowBox[{"RandomReal", "[", 
      RowBox[{"1", ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Length", "@", "poslist"}], ",", "2"}], "}"}]}], "]"}]}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"dir2", " ", "=", " ", 
     RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"For", "[", 
     RowBox[{
      RowBox[{"i", "=", "1"}], ",", 
      RowBox[{"i", "\[LessEqual]", 
       RowBox[{"buildingNum", "-", "1"}]}], ",", 
      RowBox[{"i", "+=", "1"}], ",", 
      RowBox[{"AppendTo", "[", 
       RowBox[{"dir2", ",", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"normDir", "[", 
           RowBox[{
            RowBox[{"getBuildingBegin", "[", 
             RowBox[{"i", "+", "1"}], "]"}], "+", 
            RowBox[{"{", 
             RowBox[{"1", ",", "0", ",", "0"}], "}"}], "-", 
            RowBox[{
             RowBox[{
             "pos", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}], 
             "\[LeftDoubleBracket]", "k", "\[RightDoubleBracket]"}]}], "]"}], 
          ",", 
          RowBox[{"{", 
           RowBox[{"k", ",", 
            RowBox[{"Length", "@", 
             RowBox[{
             "pos", "\[LeftDoubleBracket]", "i", 
              "\[RightDoubleBracket]"}]}]}], "}"}]}], "]"}]}], "]"}]}], "]"}],
     ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"dirplane2", " ", "=", " ", 
     RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"For", "[", 
     RowBox[{
      RowBox[{"i", "=", "1"}], ",", 
      RowBox[{"i", "\[LessEqual]", "buildingNum"}], ",", 
      RowBox[{"i", "+=", "1"}], ",", 
      RowBox[{"AppendTo", "[", 
       RowBox[{"dirplane2", ",", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"normDir", "[", 
           RowBox[{
            RowBox[{"getBuildingEnd", "[", "i", "]"}], "+", 
            RowBox[{"{", 
             RowBox[{"1", ",", "0", ",", "0"}], "}"}], "-", 
            RowBox[{
             RowBox[{
             "posplane", "\[LeftDoubleBracket]", "i", 
              "\[RightDoubleBracket]"}], "\[LeftDoubleBracket]", "k", 
             "\[RightDoubleBracket]"}]}], "]"}], ",", 
          RowBox[{"{", 
           RowBox[{"k", ",", 
            RowBox[{"Length", "@", 
             RowBox[{
             "posplane", "\[LeftDoubleBracket]", "i", 
              "\[RightDoubleBracket]"}]}]}], "}"}]}], "]"}]}], "]"}]}], "]"}],
     ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"dirlist2", " ", "=", " ", 
     RowBox[{"Flatten", "[", 
      RowBox[{
       RowBox[{"Riffle", "[", 
        RowBox[{"dirplane2", ",", "dir2"}], "]"}], ",", "1"}], "]"}]}], ";"}],
    "\[IndentingNewLine]", 
   RowBox[{"(*", "\:7f13\:548c\:89d2\:5ea6\:53d8\:5316", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{"For", "[", 
    RowBox[{
     RowBox[{"i", "=", "2"}], ",", 
     RowBox[{"i", "\[LessEqual]", " ", 
      RowBox[{"Length", "@", "dirlist2"}]}], ",", 
     RowBox[{"i", "+=", "1"}], ",", 
     RowBox[{
      RowBox[{"anglediff", " ", "=", 
       RowBox[{
        RowBox[{"ArcTan", "[", 
         FractionBox[
          RowBox[{"dirlist2", "\[LeftDoubleBracket]", 
           RowBox[{"i", ",", "3"}], "\[RightDoubleBracket]"}], 
          RowBox[{"dirlist2", "\[LeftDoubleBracket]", 
           RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}]], "]"}], "-", 
        RowBox[{"ArcTan", "[", 
         FractionBox[
          RowBox[{"dirlist2", "\[LeftDoubleBracket]", 
           RowBox[{
            RowBox[{"i", "-", "1"}], ",", "3"}], "\[RightDoubleBracket]"}], 
          RowBox[{"dirlist2", "\[LeftDoubleBracket]", 
           RowBox[{
            RowBox[{"i", "-", "1"}], ",", "1"}], "\[RightDoubleBracket]"}]], 
         "]"}]}]}], ";", " ", 
      RowBox[{
       RowBox[{
       "dirlist2", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}], 
       "=", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Abs", "[", "anglediff", "]"}], "<", 
          RowBox[{"3", " ", "\[Degree]"}]}], ",", 
         RowBox[{
         "dirlist2", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}], 
         ",", 
         RowBox[{
          RowBox[{"dirlist2", "\[LeftDoubleBracket]", 
           RowBox[{"i", "-", "1"}], "\[RightDoubleBracket]"}], ".", 
          RowBox[{"RotationMatrix", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"(", 
              RowBox[{
               RowBox[{"Sign", "[", "anglediff", "]"}], "*", "3"}], ")"}], 
             "\[Degree]"}], ",", 
            RowBox[{"{", 
             RowBox[{"0", ",", "1", ",", "0"}], "}"}]}], "]"}]}]}], 
        "]"}]}]}]}], "]"}], "\[IndentingNewLine]", 
   RowBox[{"(*", "\:968f\:673a\:504f\:79fb", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"dirlist2", "\[LeftDoubleBracket]", 
      RowBox[{";;", ",", "2"}], "\[RightDoubleBracket]"}], "+=", 
     RowBox[{"RandomReal", "[", 
      RowBox[{"0.3", ",", 
       RowBox[{"Length", "@", "dirlist2"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", "\:65cb\:8f6c\:5854\:53c2\:6570", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"layer", " ", "=", " ", "50"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"layerH", " ", "=", " ", "1"}], ";"}]}]}]], "Input",
 CellChangeTimes->{{3.6128846193899336`*^9, 3.612884620388991*^9}, {
   3.6128851920456877`*^9, 3.6128852268106766`*^9}, {3.612885425958067*^9, 
   3.612885430992355*^9}, {3.6128854860285025`*^9, 3.612885543836809*^9}, {
   3.6128856661428046`*^9, 3.6128856687009506`*^9}, {3.612885714953596*^9, 
   3.6128857153866215`*^9}, {3.6128858179614882`*^9, 3.612885875659788*^9}, {
   3.6128859076586185`*^9, 3.6128859534482374`*^9}, {3.6128866583985586`*^9, 
   3.6128866913894453`*^9}, {3.61288822494916*^9, 3.612888229902443*^9}, {
   3.612888872398192*^9, 3.6128888728852196`*^9}, {3.612892059890506*^9, 
   3.612892064050744*^9}, {3.612934505953125*^9, 3.612934510203125*^9}, {
   3.612934570828125*^9, 3.61293459446875*^9}, {3.612938316375*^9, 
   3.61293832634375*^9}, {3.612938393765625*^9, 3.61293839959375*^9}, 
   3.612939293109375*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", "\:5faa\:73af\:5f00\:59cb", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", "}"}], ",", 
    RowBox[{
     RowBox[{"t", "=", "0"}], ";", "\[IndentingNewLine]", 
     RowBox[{"rotate", " ", "=", " ", "0"}], ";", "\[IndentingNewLine]", 
     RowBox[{"viewangle", "=", "90"}], ";", "\[IndentingNewLine]", 
     RowBox[{"posV", " ", "=", " ", 
      RowBox[{
       RowBox[{"getBuildingBegin", "[", "1", "]"}], "+", 
       RowBox[{"{", 
        RowBox[{"0", ",", "0", ",", "100"}], "}"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"dirV2", " ", "=", " ", 
      RowBox[{"normDir", "[", 
       RowBox[{
        RowBox[{"getBuildingEnd", "[", "buildingNum", "]"}], "-", "posV"}], 
       "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"pause", "[", "1000", "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"For", "[", 
      RowBox[{
       RowBox[{"i", "=", "1"}], ",", 
       RowBox[{"i", "\[LessEqual]", 
        RowBox[{"100", "-", "playerH"}]}], ",", 
       RowBox[{"i", "+=", "1"}], ",", 
       RowBox[{
        RowBox[{"posV", "=", 
         RowBox[{
          RowBox[{"getBuildingBegin", "[", "1", "]"}], "+", 
          RowBox[{"{", 
           RowBox[{"0", ",", "0", ",", 
            RowBox[{"100", "-", "i"}]}], "}"}]}]}], ";", 
        RowBox[{"normDir", "[", 
         RowBox[{
          RowBox[{"getBuildingEnd", "[", "buildingNum", "]"}], "-", "posV"}], 
         "]"}], ";", 
        RowBox[{"pause", "[", "5", "]"}]}]}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"pause", "[", "500", "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"i", "=", "1"}], ",", 
        RowBox[{"i", "\[LessEqual]", 
         RowBox[{"Length", "@", "wavheadPos"}]}], ",", 
        RowBox[{"i", "+=", "1"}], ",", 
        RowBox[{
         RowBox[{"posV", " ", "=", 
          RowBox[{
          "wavheadPos", "\[LeftDoubleBracket]", "i", 
           "\[RightDoubleBracket]"}]}], ";", 
         RowBox[{"dirV2", " ", "=", " ", 
          RowBox[{
          "wavheadAngle", "\[LeftDoubleBracket]", "i", 
           "\[RightDoubleBracket]"}]}], ";", " ", 
         RowBox[{"pause", "[", "20", "]"}]}]}], "]"}], "\[IndentingNewLine]", 
      
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"step", "=", "1"}], ",", 
        RowBox[{"step", "\[LessEqual]", 
         RowBox[{
          RowBox[{"Length", "@", "poslist"}], "-", "50"}]}], ",", 
        RowBox[{"step", "+=", "1"}], ",", 
        RowBox[{
         RowBox[{"posV", " ", "=", 
          RowBox[{
          "poslist", "\[LeftDoubleBracket]", "step", 
           "\[RightDoubleBracket]"}]}], ";", 
         RowBox[{"dirV2", " ", "=", " ", 
          RowBox[{
          "dirlist2", "\[LeftDoubleBracket]", "step", 
           "\[RightDoubleBracket]"}]}], ";", " ", 
         RowBox[{"pause", "[", "5", "]"}]}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", "\:5347\:5854", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"t", "=", "0"}], ";", 
     RowBox[{
      RowBox[{"While", "[", 
       RowBox[{
        RowBox[{"t", "\[LessEqual]", "layer"}], ",", 
        RowBox[{
         RowBox[{"t", "+=", "1"}], ";", 
         RowBox[{"dirV2", " ", "=", " ", 
          RowBox[{"normDir", "[", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{
              RowBox[{
               RowBox[{"centerlist", "\[LeftDoubleBracket]", 
                RowBox[{"-", "1"}], "\[RightDoubleBracket]"}], "+", "50"}], 
              ",", "0", ",", 
              RowBox[{"layerH", "*", "t"}]}], "}"}], "-", "posV"}], "]"}]}], 
         ";", 
         RowBox[{"pause", "[", "50", "]"}]}]}], "]"}], "\[IndentingNewLine]", 
      
      RowBox[{"(*", "\:98de\:5411\:5854", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"While", "[", 
       RowBox[{
        RowBox[{"rotate", " ", "<", " ", "90"}], ",", 
        RowBox[{
         RowBox[{"dis", "=", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{
              RowBox[{"centerlist", "\[LeftDoubleBracket]", 
               RowBox[{"-", "1"}], "\[RightDoubleBracket]"}], "+", "50"}], 
             ",", "0", ",", 
             RowBox[{"(", 
              RowBox[{
               RowBox[{"layerH", "*", "layer"}], "+", "1"}], ")"}]}], "}"}], 
           "-", "posV"}]}], ";", " ", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"Norm", "[", 
             RowBox[{"dis", "\[LeftDoubleBracket]", 
              RowBox[{"1", ";;", "2"}], "\[RightDoubleBracket]"}], "]"}], 
            "\[GreaterEqual]", "1"}], ",", 
           RowBox[{
            RowBox[{"direction", " ", "=", 
             FractionBox["dis", 
              RowBox[{"Norm", "[", "dis", "]"}]]}], ";", 
            RowBox[{"posV", "+=", 
             RowBox[{"speed", "*", " ", "direction"}]}], ";", 
            RowBox[{"dirV2", " ", "=", 
             RowBox[{"10", " ", "direction"}]}]}], ",", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"VectorAngle", "[", 
               RowBox[{
                RowBox[{"dirV2", "\[LeftDoubleBracket]", 
                 RowBox[{"1", ";;", "2"}], "\[RightDoubleBracket]"}], ",", 
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{"-", "1"}], ",", "0"}], "}"}]}], "]"}], ">", 
              RowBox[{"1", "\[Degree]"}]}], ",", 
             RowBox[{"dirV2", "=", 
              RowBox[{"dirV2", ".", 
               RowBox[{"RotationMatrix", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"-", "3"}], "\[Degree]"}], ",", 
                 RowBox[{"{", 
                  RowBox[{"0", ",", "0", ",", "1"}], "}"}]}], "]"}]}]}], ",", 
             
             RowBox[{
              RowBox[{"posV", "+=", 
               RowBox[{"{", 
                RowBox[{"0", ",", "0", ",", "0.1"}], "}"}]}], ";", 
              RowBox[{"dirV2", "=", 
               RowBox[{"normDir", "[", 
                RowBox[{
                 RowBox[{"getBuildingBegin", "[", "1", "]"}], "-", "posV"}], 
                "]"}]}], ";"}]}], 
            RowBox[{"(*", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"viewangle", ">", "10"}], ",", 
               RowBox[{"viewangle", "-=", "0.3"}]}], "]"}], "*)"}], "]"}]}], 
          "]"}], ";", 
         RowBox[{"rotate", "+=", "0.2"}], ";", "\[IndentingNewLine]", 
         RowBox[{"pause", "[", "10", "]"}]}]}], "]"}], "\[IndentingNewLine]", 
      
      RowBox[{"(*", "\:56de\:98de", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"While", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
         "posV", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], 
         "\[GreaterEqual]", " ", "1"}], ",", 
        RowBox[{
         RowBox[{"posV", "=", 
          RowBox[{"posV", "+", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"-", "1"}], ",", "0", ",", "0"}], "}"}]}]}], ";", 
         RowBox[{"dirV2", "=", 
          RowBox[{"normDir", "[", 
           RowBox[{
            RowBox[{"getBuildingEnd", "[", "1", "]"}], "-", "posV"}], "]"}]}],
          ";", 
         RowBox[{"pause", "[", "10", "]"}]}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"While", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"VectorAngle", "[", 
         RowBox[{"dirV2", ",", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{
              RowBox[{"centerlist", "\[LeftDoubleBracket]", 
               RowBox[{"-", "1"}], "\[RightDoubleBracket]"}], "+", "50"}], 
             ",", "0", ",", 
             RowBox[{"layerH", "*", "t"}]}], "}"}], "-", "posV"}]}], "]"}], 
        ">", 
        RowBox[{"5", "\[Degree]"}]}], ",", 
       RowBox[{
        RowBox[{"dirV2", "=", 
         RowBox[{"dirV2", ".", 
          RowBox[{"RotationMatrix", "[", 
           RowBox[{
            RowBox[{"1", "\[Degree]"}], ",", 
            RowBox[{"{", 
             RowBox[{"0", ",", "1", ",", "0"}], "}"}]}], "]"}]}]}], ";", 
        RowBox[{"pause", "[", "10", "]"}]}]}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"While", "[", 
      RowBox[{
       RowBox[{"viewangle", ">", "10"}], ",", 
       RowBox[{
        RowBox[{"viewangle", "-=", "2"}], ";", 
        RowBox[{"pause", "[", "50", "]"}]}]}], "]"}]}]}], "]"}]}]], "Input",
 CellChangeTimes->{{3.6128851381496053`*^9, 3.612885184192239*^9}, {
   3.6128852373452787`*^9, 3.6128852436876416`*^9}, {3.612885326729391*^9, 
   3.6128853361369295`*^9}, 3.6128857105503445`*^9, {3.6128860104935007`*^9, 
   3.612886111465276*^9}, {3.6128866893933315`*^9, 3.6128867246813498`*^9}, {
   3.6128868122243567`*^9, 3.612886841598037*^9}, {3.6128869780558414`*^9, 
   3.6128869792949123`*^9}, {3.6128874935023236`*^9, 
   3.6128874997256794`*^9}, {3.6128876108280344`*^9, 
   3.6128876591047955`*^9}, {3.612887760156575*^9, 3.6128877718212423`*^9}, {
   3.6128879323734255`*^9, 3.6128880572315674`*^9}, {3.6128880954277515`*^9, 
   3.61288817162411*^9}, {3.612888201789835*^9, 3.6128882037469473`*^9}, {
   3.612888267402588*^9, 3.612888403030346*^9}, {3.6128884469968605`*^9, 
   3.6128885040481234`*^9}, {3.6128885359409475`*^9, 3.612888565457636*^9}, {
   3.6128885969044347`*^9, 3.61288860924514*^9}, {3.6128887183473806`*^9, 
   3.6128887532243757`*^9}, {3.612888785975249*^9, 3.6128887951737747`*^9}, 
   3.612888860355503*^9, {3.612888906243128*^9, 3.612888948903568*^9}, {
   3.612889047500207*^9, 3.6128890492573075`*^9}, {3.6128890940548697`*^9, 
   3.6128891987698593`*^9}, 3.6128892602453756`*^9, {3.612889483707157*^9, 
   3.6128894987570176`*^9}, {3.6128895547182183`*^9, 
   3.6128895684070015`*^9}, {3.6128896235291543`*^9, 
   3.6128896935171576`*^9}, {3.6128897408298635`*^9, 
   3.6128897419129252`*^9}, {3.612889817365241*^9, 3.6128899104265637`*^9}, {
   3.612889982342677*^9, 3.612890065893456*^9}, {3.612890103654616*^9, 
   3.612890105722734*^9}, {3.612890155530583*^9, 3.6128901594738083`*^9}, {
   3.612890312568565*^9, 3.6128903149277*^9}, {3.612890348709632*^9, 
   3.6128903499767046`*^9}, {3.6128903840506535`*^9, 3.612890419750695*^9}, {
   3.6128904644992547`*^9, 3.6128904677784424`*^9}, {3.61289054484085*^9, 
   3.6128905472399874`*^9}, {3.6128905954427443`*^9, 
   3.6128906211042123`*^9}, {3.6128906802345943`*^9, 3.612890806127795*^9}, {
   3.6128908476191683`*^9, 3.6128909027033186`*^9}, {3.612890985736068*^9, 
   3.6128910174068794`*^9}, {3.6128910645655766`*^9, 3.612891069936884*^9}, {
   3.6128911121422977`*^9, 3.6128911280272064`*^9}, {3.612891166271394*^9, 
   3.612891243677821*^9}, {3.6128913056973686`*^9, 3.6128913117187133`*^9}, {
   3.6128913738152647`*^9, 3.6128913774754744`*^9}, {3.612891425326211*^9, 
   3.6128914303004956`*^9}, {3.6128915212126956`*^9, 3.6128915217387257`*^9}, 
   3.6128915770968924`*^9, {3.6128916085436907`*^9, 3.6128916357162447`*^9}, {
   3.6128916925064926`*^9, 3.612891754680049*^9}, {3.612891793317259*^9, 
   3.6128917940453005`*^9}, {3.612891833108535*^9, 3.6128918383118324`*^9}, {
   3.612891872081764*^9, 3.6128918786611404`*^9}, 3.612892004860358*^9, {
   3.612892062212639*^9, 3.6128920626886663`*^9}, {3.612934655171875*^9, 
   3.612934671375*^9}, {3.61293804503125*^9, 3.612938045265625*^9}, {
   3.612938119875*^9, 3.612938253546875*^9}, {3.612938409015625*^9, 
   3.612938576265625*^9}, {3.612938607890625*^9, 3.612938610640625*^9}, {
   3.6129386558125*^9, 3.612938658703125*^9}, {3.612938783921875*^9, 
   3.612938821015625*^9}, {3.61293886365625*^9, 3.6129389375*^9}, {
   3.612939036171875*^9, 3.6129390464375*^9}, {3.612939079078125*^9, 
   3.61293908628125*^9}, {3.612939189796875*^9, 3.6129391976875*^9}, {
   3.612939277765625*^9, 3.612939278625*^9}, {3.61293939834375*^9, 
   3.61293942346875*^9}, {3.61293950078125*^9, 3.612939593375*^9}, 
   3.61294121271875*^9, {3.612941340734375*^9, 3.61294136778125*^9}, {
   3.61294146490625*^9, 3.612941466375*^9}, {3.61294716215625*^9, 
   3.612947248125*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Dynamic", "[", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"Graphics3D", "[", 
     RowBox[{
      RowBox[{"Flatten", "@", 
       RowBox[{"{", 
        RowBox[{"buildingCube", ",", 
         RowBox[{"Table", "[", 
          RowBox[{
           RowBox[{"createCube", "[", 
            RowBox[{
             RowBox[{"layer", "+", "1", "-", "i"}], ",", 
             RowBox[{"layer", "+", "1", "-", "i"}], ",", "layerH", ",", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{
                RowBox[{"centerlist", "\[LeftDoubleBracket]", 
                 RowBox[{"-", "1"}], "\[RightDoubleBracket]"}], "+", "50"}], 
               ",", "0"}], "}"}], ",", "Cyan", ",", 
             RowBox[{"rotate", " ", "i"}], ",", 
             RowBox[{"layerH", 
              RowBox[{"(", 
               RowBox[{"i", "-", "1"}], ")"}]}]}], "]"}], ",", 
           RowBox[{"{", 
            RowBox[{"i", ",", "1", ",", "t"}], "}"}]}], "]"}]}], "}"}]}], ",", 
      RowBox[{"ViewVector", "\[Rule]", 
       RowBox[{"viewvector", "[", 
        RowBox[{"posV", ",", "dirV2"}], "]"}]}], ",", 
      RowBox[{"ViewAngle", "\[Rule]", 
       RowBox[{"viewangle", " ", "\[Degree]"}]}], ",", 
      RowBox[{"Boxed", "\[Rule]", "False"}], ",", 
      RowBox[{"ImageSize", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"300", ",", "300"}], "}"}]}]}], "]"}], ",", 
    RowBox[{"Graphics3D", "[", 
     RowBox[{
      RowBox[{"Flatten", "@", 
       RowBox[{"{", 
        RowBox[{"buildingCube", ",", 
         RowBox[{"Table", "[", 
          RowBox[{
           RowBox[{"createCube", "[", 
            RowBox[{
             RowBox[{"layer", "+", "1", "-", "i"}], ",", 
             RowBox[{"layer", "+", "1", "-", "i"}], ",", "layerH", ",", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{
                RowBox[{"centerlist", "\[LeftDoubleBracket]", 
                 RowBox[{"-", "1"}], "\[RightDoubleBracket]"}], "+", "50"}], 
               ",", "0"}], "}"}], ",", "Cyan", ",", 
             RowBox[{"rotate", " ", "i"}], ",", 
             RowBox[{"layerH", 
              RowBox[{"(", 
               RowBox[{"i", "-", "1"}], ")"}]}]}], "]"}], ",", 
           RowBox[{"{", 
            RowBox[{"i", ",", "1", ",", "t"}], "}"}]}], "]"}], ",", "Red", 
         ",", 
         RowBox[{
          RowBox[{
           RowBox[{"Sphere", "[", 
            RowBox[{"#", ",", "3"}], "]"}], "&"}], "@", "posV"}], ",", 
         RowBox[{"arrow", "[", 
          RowBox[{"posV", ",", 
           RowBox[{"dirV2", "+", "posV"}]}], "]"}]}], "}"}]}], ",", 
      RowBox[{"ImageSize", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"689", ",", "323"}], "}"}]}], ",", 
      RowBox[{"Boxed", "\[Rule]", "False"}]}], "]"}]}], "}"}], "]"}]], "Input",\

 CellChangeTimes->{{3.6128867529909687`*^9, 3.6128868018827653`*^9}, {
   3.6128874828527145`*^9, 3.6128874854088607`*^9}, {3.612887547075388*^9, 
   3.612887570902751*^9}, {3.6128882354107585`*^9, 3.612888243276208*^9}, 
   3.612889207400353*^9, {3.612889376254011*^9, 3.6128893824463654`*^9}, {
   3.6128895403563967`*^9, 3.6128895718501987`*^9}, {3.612889630990581*^9, 
   3.612889631095587*^9}, 3.6128907838325195`*^9, 3.61293921996875*^9, {
   3.6129396064375*^9, 3.6129396105*^9}, {3.612939672*^9, 
   3.612939674015625*^9}, {3.612941059859375*^9, 3.612941066359375*^9}}],

Cell[BoxData[
 DynamicBox[ToBoxes[{
    Graphics3D[
     Flatten[{$CellContext`buildingCube, 
       Table[
        $CellContext`createCube[$CellContext`layer + 
         1 - $CellContext`i, $CellContext`layer + 
         1 - $CellContext`i, $CellContext`layerH, {
         Part[$CellContext`centerlist, -1] + 50, 0}, 
         Cyan, $CellContext`rotate $CellContext`i, $CellContext`layerH \
($CellContext`i - 1)], {$CellContext`i, 1, $CellContext`t}]}], 
     ViewVector -> $CellContext`viewvector[$CellContext`posV, \
$CellContext`dirV2], ViewAngle -> $CellContext`viewangle Degree, Boxed -> 
     False, ImageSize -> {300, 300}], 
    Graphics3D[
     Flatten[{$CellContext`buildingCube, 
       Table[
        $CellContext`createCube[$CellContext`layer + 
         1 - $CellContext`i, $CellContext`layer + 
         1 - $CellContext`i, $CellContext`layerH, {
         Part[$CellContext`centerlist, -1] + 50, 0}, 
         Cyan, $CellContext`rotate $CellContext`i, $CellContext`layerH \
($CellContext`i - 1)], {$CellContext`i, 1, $CellContext`t}], Red, 
       (Sphere[#, 3]& )[$CellContext`posV], 
       $CellContext`arrow[$CellContext`posV, $CellContext`dirV2 + \
$CellContext`posV]}], ImageSize -> {689, 323}, Boxed -> False]}, StandardForm],
  ImageSizeCache->{847.5, {600., 184.}}]], "Output",
 CellChangeTimes->{
  3.612885132003254*^9, 3.612886718258982*^9, 3.612886772640093*^9, 
   3.6128868031288366`*^9, 3.6128875137384815`*^9, 3.612887572505842*^9, 
   3.612889016313423*^9, {3.6128892155248175`*^9, 3.6128892287895765`*^9}, 
   3.612889337476793*^9, {3.6128893787601542`*^9, 3.6128893829463935`*^9}, 
   3.612889427307931*^9, {3.612889541750477*^9, 3.612889572740249*^9}, 
   3.6128896316336174`*^9, {3.6128902225734177`*^9, 3.612890230408866*^9}, 
   3.612890356775093*^9, 3.6128907866416807`*^9, 3.612938588*^9, {
   3.612939668328125*^9, 3.612939674375*^9}, {3.612940951296875*^9, 
   3.6129409575*^9}, 3.61294106803125*^9}]
}, Open  ]]
},
WindowSize->{1264, 665},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
Magnification->1.2000000476837158`,
FrontEndVersion->"9.0 for Microsoft Windows (32-bit) (2013\:5e742\:670813\
\:65e5)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[557, 20, 137, 2, 36, "Input"],
Cell[697, 24, 14539, 383, 1268, "Input"],
Cell[CellGroupData[{
Cell[15261, 411, 536, 9, 36, "Input"],
Cell[15800, 422, 15535, 265, 207, 4632, 86, "CachedBoxData", "BoxData", \
"Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[31372, 692, 2279, 60, 152, "Input"],
Cell[33654, 754, 21227, 367, 319, "Output"]
}, Open  ]],
Cell[54896, 1124, 2178, 60, 175, "Input"],
Cell[CellGroupData[{
Cell[57099, 1188, 1375, 39, 106, "Input"],
Cell[58477, 1229, 881, 16, 804, "Output"]
}, Open  ]],
Cell[59373, 1248, 271, 9, 12, "Text"],
Cell[59647, 1259, 271, 9, 12, "Text"],
Cell[59921, 1270, 4114, 116, 290, "Input"],
Cell[CellGroupData[{
Cell[64060, 1390, 1302, 33, 83, "Input"],
Cell[65365, 1425, 643, 13, 804, "Output"]
}, Open  ]],
Cell[66023, 1441, 91, 1, 36, "Input"],
Cell[66117, 1444, 271, 9, 12, "Text"],
Cell[66391, 1455, 271, 9, 12, "Text"],
Cell[66665, 1466, 6809, 185, 416, "Input"],
Cell[CellGroupData[{
Cell[73499, 1655, 1331, 34, 106, "Input"],
Cell[74833, 1691, 650, 12, 408, "Output"]
}, Open  ]],
Cell[75498, 1706, 271, 9, 12, "Text"],
Cell[75772, 1717, 271, 9, 12, "Text"],
Cell[76046, 1728, 271, 9, 12, "Text"],
Cell[76320, 1739, 9790, 255, 743, "Input"],
Cell[86113, 1996, 12093, 270, 692, "Input"],
Cell[CellGroupData[{
Cell[98231, 2270, 3372, 79, 267, "Input"],
Cell[101606, 2351, 1944, 36, 804, "Output"]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
